<?xml version="1.0"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
               "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<refentry id="telepathy-glib-client">
<refmeta>
<refentrytitle role="top_of_page" id="telepathy-glib-client.top_of_page">TpClient</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>TELEPATHY-GLIB Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>TpClient</refname>
<refpurpose>proxy object for a client of the ChannelDispatcher</refpurpose>
</refnamediv>

<refsynopsisdiv id="telepathy-glib-client.synopsis" role="synopsis">
<title role="synopsis.title">Synopsis</title>
<anchor id="TpClient"/>
<synopsis>

#include &lt;telepathy-glib/client.h&gt;

                    <link linkend="TpClient-struct">TpClient</link>;
                    <link linkend="TpClientClass">TpClientClass</link>;
<link linkend="void">void</link>                <link linkend="tp-client-init-known-interfaces">tp_client_init_known_interfaces</link>     (void);

<link linkend="void">void</link>                (<link linkend="tp-cli-client-observer-callback-for-observe-channels">*tp_cli_client_observer_callback_for_observe_channels</link>)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * <link linkend="tp-cli-client-observer-call-observe-channels">tp_cli_client_observer_call_observe_channels</link>
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Account,
                                                         const <link linkend="gchar">gchar</link> *in_Connection,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="gchar">gchar</link> *in_Dispatch_Operation,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Requests_Satisfied,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Observer_Info,
                                                         <link linkend="tp-cli-client-observer-callback-for-observe-channels">tp_cli_client_observer_callback_for_observe_channels</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);

<link linkend="void">void</link>                (<link linkend="tp-cli-client-handler-callback-for-handle-channels">*tp_cli_client_handler_callback_for_handle_channels</link>)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * <link linkend="tp-cli-client-handler-call-handle-channels">tp_cli_client_handler_call_handle_channels</link>
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Account,
                                                         const <link linkend="gchar">gchar</link> *in_Connection,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Requests_Satisfied,
                                                         <link linkend="guint64">guint64</link> in_User_Action_Time,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Handler_Info,
                                                         <link linkend="tp-cli-client-handler-callback-for-handle-channels">tp_cli_client_handler_callback_for_handle_channels</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="void">void</link>                (<link linkend="tp-cli-client-interface-requests-callback-for-add-request">*tp_cli_client_interface_requests_callback_for_add_request</link>)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * <link linkend="tp-cli-client-interface-requests-call-add-request">tp_cli_client_interface_requests_call_add_request</link>
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Request,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Properties,
                                                         <link linkend="tp-cli-client-interface-requests-callback-for-add-request">tp_cli_client_interface_requests_callback_for_add_request</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="void">void</link>                (<link linkend="tp-cli-client-interface-requests-callback-for-remove-request">*tp_cli_client_interface_requests_callback_for_remove_request</link>)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * <link linkend="tp-cli-client-interface-requests-call-remove-request">tp_cli_client_interface_requests_call_remove_request</link>
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Request,
                                                         const <link linkend="gchar">gchar</link> *in_Error,
                                                         const <link linkend="gchar">gchar</link> *in_Message,
                                                         <link linkend="tp-cli-client-interface-requests-callback-for-remove-request">tp_cli_client_interface_requests_callback_for_remove_request</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);

<link linkend="void">void</link>                (<link linkend="tp-cli-client-approver-callback-for-add-dispatch-operation">*tp_cli_client_approver_callback_for_add_dispatch_operation</link>)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);
<link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * <link linkend="tp-cli-client-approver-call-add-dispatch-operation">tp_cli_client_approver_call_add_dispatch_operation</link>
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="gchar">gchar</link> *in_DispatchOperation,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Properties,
                                                         <link linkend="tp-cli-client-approver-callback-for-add-dispatch-operation">tp_cli_client_approver_callback_for_add_dispatch_operation</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);
</synopsis>
</refsynopsisdiv>

<refsect1 id="telepathy-glib-client.object-hierarchy" role="object_hierarchy">
<title role="object_hierarchy.title">Object Hierarchy</title>
<synopsis>
  <link linkend="GObject">GObject</link>
   +----<link linkend="TpProxy">TpProxy</link>
         +----TpClient
</synopsis>
</refsect1>








<refsect1 id="telepathy-glib-client.description" role="desc">
<title role="desc.title">Description</title>
<para>
Each client to which the ChannelDispatcher can send channels must implement
the Client interface. This object represents such a client, and is mainly
useful in the implementation of the ChannelDispatcher itself.</para>
<para>
</para>
</refsect1>

<refsect1 id="telepathy-glib-client.details" role="details">
<title role="details.title">Details</title>
<refsect2 id="TpClient-struct" role="struct">
<title>TpClient</title>
<indexterm zone="TpClient-struct" role="0.7.UNRELEASED"><primary sortas="TpClient">TpClient</primary></indexterm><programlisting>typedef struct _TpClient TpClient;</programlisting>
<para>
Each client to which the ChannelDispatcher can send channels must implement
the Client interface. This object represents such a client, and is mainly
useful in the implementation of the ChannelDispatcher itself.
</para>
<para>
This proxy is usable but very incomplete: accessors for D-Bus properties
will be added in a later version of telepathy-glib, along with a mechanism
similar to <link linkend="tp-connection-call-when-ready"><function>tp_connection_call_when_ready()</function></link>.
</para>
<para>
Many operations performed on a Client are done via D-Bus properties.
Until convenience methods for this are implemented, use of the generic
<link linkend="tp-cli-dbus-properties-call-get-all"><function>tp_cli_dbus_properties_call_get_all()</function></link> and <link linkend="tp-cli-dbus-properties-call-set"><function>tp_cli_dbus_properties_call_set()</function></link>
methods is recommended.</para>
<para>
</para><para role="since">Since 0.7.UNRELEASED</para></refsect2>
<refsect2 id="TpClientClass" role="struct">
<title>TpClientClass</title>
<indexterm zone="TpClientClass"><primary sortas="TpClientClass">TpClientClass</primary></indexterm><programlisting>typedef struct {
} TpClientClass;
</programlisting>
<para>
The class of a <link linkend="TpClient"><type>TpClient</type></link>.</para>
<para>
</para></refsect2>
<refsect2 id="tp-client-init-known-interfaces" role="function" condition="since:0.7.UNRELEASED">
<title>tp_client_init_known_interfaces ()</title>
<indexterm zone="tp-client-init-known-interfaces" role="0.7.UNRELEASED"><primary sortas="tp_client_init_known_interfaces">tp_client_init_known_interfaces</primary></indexterm><programlisting><link linkend="void">void</link>                tp_client_init_known_interfaces     (void);</programlisting>
<para>
Ensure that the known interfaces for TpClient have been set up.
This is done automatically when necessary, but for correct
overriding of library interfaces by local extensions, you should
call this function before calling
<link linkend="tp-proxy-or-subclass-hook-on-interface-add"><function>tp_proxy_or_subclass_hook_on_interface_add()</function></link> with first argument
<link linkend="TP-TYPE-CLIENT--CAPS"><literal>TP_TYPE_CLIENT</literal></link>.</para>
<para>
</para><para role="since">Since 0.7.UNRELEASED</para></refsect2>
<refsect2 id="tp-cli-client-observer-callback-for-observe-channels" role="function">
<title>tp_cli_client_observer_callback_for_observe_channels ()</title>
<indexterm zone="tp-cli-client-observer-callback-for-observe-channels"><primary sortas="tp_cli_client_observer_callback_for_observe_channels">tp_cli_client_observer_callback_for_observe_channels</primary></indexterm><programlisting><link linkend="void">void</link>                (*tp_cli_client_observer_callback_for_observe_channels)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Signature of the callback called when a ObserveChannels method call
succeeds or fails.</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the proxy on which the call was made
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&#160;:</term>
<listitem><simpara> <link linkend="NULL--CAPS"><literal>NULL</literal></link> on success, or an error on failure
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> user-supplied object
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-observer-call-observe-channels" role="function">
<title>tp_cli_client_observer_call_observe_channels ()</title>
<indexterm zone="tp-cli-client-observer-call-observe-channels"><primary sortas="tp_cli_client_observer_call_observe_channels">tp_cli_client_observer_call_observe_channels</primary></indexterm><programlisting><link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * tp_cli_client_observer_call_observe_channels
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Account,
                                                         const <link linkend="gchar">gchar</link> *in_Connection,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="gchar">gchar</link> *in_Dispatch_Operation,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Requests_Satisfied,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Observer_Info,
                                                         <link linkend="tp-cli-client-observer-callback-for-observe-channels">tp_cli_client_observer_callback_for_observe_channels</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Start a ObserveChannels method call.
</para>
<para>
&lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;         &lt;p&gt;Called by the channel dispatcher when channels in which the           observer has registered an interest are announced in a &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Connection.Interface.Requests&quot;&gt;NewChannels&lt;/tp:dbus-ref&gt;           signal.&lt;/p&gt;          &lt;p&gt;If the same NewChannels signal announces some channels that match           the filter, and some that do not, then only a subset of the channels           (those that do match the filter) are passed to this method.&lt;/p&gt;          &lt;p&gt;If the channel dispatcher will split up the channels from a single           NewChannels signal and dispatch them separately (for instance           because no installed Handler can handle all of them), it will call           ObserveChannels several times.&lt;/p&gt;          &lt;p&gt;The observer MUST NOT return from this method call until it is ready           for a handler for the channel to run (which may change the channel&apos;s           state).&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;The channel dispatcher must wait for observers to start up,             to avoid the following race: text channel logger (observer) gets             ObserveChannels, text channel handler gets             &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Handler&quot;&gt;HandleChannels&lt;/tp:dbus-ref&gt;             channel handler starts up faster and acknowledges messages,             logger never sees those messages.&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;The channel dispatcher SHOULD NOT change its behaviour based on           whether this method succeeds or fails: there are no defined D-Bus           errors for this method, and if it fails, this only indicates that           an Observer is somehow broken.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;The expected error response in the channel dispatcher is to             log a warning, and otherwise continue as though this method             had succeeded.&lt;/p&gt;         &lt;/tp:rationale&gt;</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the <link linkend="TpProxy"><type>TpProxy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timeout_ms</parameter>&#160;:</term>
<listitem><simpara> the timeout in milliseconds, or -1 to use the
  default
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Account</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Account&lt;/tp:dbus-ref&gt;           with which the channels are associated. The           well-known bus name to use is that of the           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;AccountManager&lt;/tp:dbus-ref&gt;.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Connection</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Connection&lt;/tp:dbus-ref&gt;           with which the channels are associated. The           well-known bus name to use can be derived from this object           path by removing the leading &apos;/&apos; and replacing all subsequent           &apos;/&apos; by &apos;.&apos;.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Channels</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Channel&lt;/tp:dbus-ref&gt;s           and their properties. Their well-known bus names are all the same as           that of the Connection.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Dispatch_Operation</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;The path to the &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelDispatchOperation&lt;/tp:dbus-ref&gt;             for these channels, or the special value &apos;/&apos; if there is no             ChannelDispatchOperation (because the channels were requested, not             incoming).&lt;/p&gt;            &lt;p&gt;If the Observer calls &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;Claim&lt;/tp:dbus-ref&gt;             or &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;HandleWith&lt;/tp:dbus-ref&gt;             on the dispatch operation, it MUST be careful to avoid deadlock,             since these methods cannot return until the Observer has returned             from &lt;tp:member-ref&gt;ObserveChannels&lt;/tp:member-ref&gt;.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;This allows an Observer to &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;Claim&lt;/tp:dbus-ref&gt;               a set of channels without having to match up calls to this method               with calls to &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Approver&quot;&gt;AddDispatchOperation&lt;/tp:dbus-ref&gt;.&lt;/p&gt;           &lt;/tp:rationale&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Requests_Satisfied</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The requests satisfied by these channels.            &lt;tp:rationale&gt;             If the same process is an Observer and a Handler, it can be useful             to be given this information as soon as possible (it will also             be passed to &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client&quot;&gt;Handler.HandleChannels&lt;/tp:dbus-ref&gt;).           &lt;/tp:rationale&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Observer_Info</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;Additional information about these channels. No keys are             currently defined.&lt;/p&gt;            &lt;p&gt;If keys are defined for this dictionary, all will be optional;             observers MAY safely ignore any entry in this dictionary.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&#160;:</term>
<listitem><simpara> called when the method call succeeds or fails;
  may be <link linkend="NULL--CAPS"><literal>NULL</literal></link> to make a "fire and forget" call with no 
  reply tracking
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data passed to the callback;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>destroy</parameter>&#160;:</term>
<listitem><simpara> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> If not <link linkend="NULL--CAPS"><literal>NULL</literal></link>, a <link linkend="GObject"><type>GObject</type></link> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if 
  <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> a <link linkend="TpProxyPendingCall"><type>TpProxyPendingCall</type></link> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <link linkend="TpProxy"><type>TpProxy</type></link> becomes invalid.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-handler-callback-for-handle-channels" role="function">
<title>tp_cli_client_handler_callback_for_handle_channels ()</title>
<indexterm zone="tp-cli-client-handler-callback-for-handle-channels"><primary sortas="tp_cli_client_handler_callback_for_handle_channels">tp_cli_client_handler_callback_for_handle_channels</primary></indexterm><programlisting><link linkend="void">void</link>                (*tp_cli_client_handler_callback_for_handle_channels)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Signature of the callback called when a HandleChannels method call
succeeds or fails.</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the proxy on which the call was made
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&#160;:</term>
<listitem><simpara> <link linkend="NULL--CAPS"><literal>NULL</literal></link> on success, or an error on failure
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> user-supplied object
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-handler-call-handle-channels" role="function">
<title>tp_cli_client_handler_call_handle_channels ()</title>
<indexterm zone="tp-cli-client-handler-call-handle-channels"><primary sortas="tp_cli_client_handler_call_handle_channels">tp_cli_client_handler_call_handle_channels</primary></indexterm><programlisting><link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * tp_cli_client_handler_call_handle_channels
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Account,
                                                         const <link linkend="gchar">gchar</link> *in_Connection,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Requests_Satisfied,
                                                         <link linkend="guint64">guint64</link> in_User_Action_Time,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Handler_Info,
                                                         <link linkend="tp-cli-client-handler-callback-for-handle-channels">tp_cli_client_handler_callback_for_handle_channels</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Start a HandleChannels method call.
</para>
<para>
&lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;         &lt;p&gt;Called by the channel dispatcher when this client should handle these           channels, or when this client should present channels that it is already           handling to the user (e.g. bring them into the foreground).&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;Clients are expected to know what channels they&apos;re already handling,             and which channel object path corresponds to which window or tab.             This can easily be done using a hash table keyed by channels&apos; object             paths.&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;This method can raise any D-Bus error. If it does, the           handler is assumed to have failed or crashed, and the channel           dispatcher MUST recover in an implementation-specific way; it MAY           attempt to dispatch the channels to another handler, or close the           channels.&lt;/p&gt;          &lt;p&gt;If closing the channels, it is RECOMMENDED that the channel           dispatcher attempts to close the channels using           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Channel.Close&lt;/tp:dbus-ref&gt;,           but resorts to calling           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Channel.Interface.Destroyable.Destroy&lt;/tp:dbus-ref&gt;           (if available) or ignoring the channel (if not) if the same handler           repeatedly fails to handle channels.&lt;/p&gt;          &lt;p&gt;After HandleChannels returns successfully, the client process is           considered to be responsible for the channel until it its unique           name disappears from the bus.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;If a process has multiple Client bus names - some temporary and             some long-lived - and drops one of the temporary bus names in order             to reduce the set of channels that it will handle, any channels             that it is already handling should remain unaffected.&lt;/p&gt;         &lt;/tp:rationale&gt;</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the <link linkend="TpProxy"><type>TpProxy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timeout_ms</parameter>&#160;:</term>
<listitem><simpara> the timeout in milliseconds, or -1 to use the
  default
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Account</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Account&lt;/tp:dbus-ref&gt;           with which the channels are associated. The           well-known bus name to use is that of the           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;AccountManager&lt;/tp:dbus-ref&gt;.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Connection</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The Connection with which the channels are associated. The           well-known bus name to use can be derived from this object           path by removing the leading &apos;/&apos; and replacing all subsequent           &apos;/&apos; by &apos;.&apos;.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Channels</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The channels and their immutable properties. Their well-known           bus name is the same as that of the Connection.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Requests_Satisfied</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;The requests satisfied by these channels.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;If the handler implements Requests, this tells it               that these channels match previous &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Interface.Requests&quot;&gt;AddRequest&lt;/tp:dbus-ref&gt;               calls that it may have received.&lt;/p&gt;              &lt;p&gt;There can be more than one, if they were EnsureChannel               requests.&lt;/p&gt;           &lt;/tp:rationale&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_User_Action_Time</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The time at which user action occurred, or 0 if this channel           is to be handled for some reason not involving user action.           Handlers SHOULD use this for focus-stealing prevention,           if applicable.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Handler_Info</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;Additional information about these channels. No keys are             currently defined.&lt;/p&gt;            &lt;p&gt;If keys are defined for this dictionary, all will be optional;             handlers MAY safely ignore any entry in this dictionary.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&#160;:</term>
<listitem><simpara> called when the method call succeeds or fails;
  may be <link linkend="NULL--CAPS"><literal>NULL</literal></link> to make a "fire and forget" call with no 
  reply tracking
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data passed to the callback;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>destroy</parameter>&#160;:</term>
<listitem><simpara> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> If not <link linkend="NULL--CAPS"><literal>NULL</literal></link>, a <link linkend="GObject"><type>GObject</type></link> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if 
  <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> a <link linkend="TpProxyPendingCall"><type>TpProxyPendingCall</type></link> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <link linkend="TpProxy"><type>TpProxy</type></link> becomes invalid.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-interface-requests-callback-for-add-request" role="function">
<title>tp_cli_client_interface_requests_callback_for_add_request ()</title>
<indexterm zone="tp-cli-client-interface-requests-callback-for-add-request"><primary sortas="tp_cli_client_interface_requests_callback_for_add_request">tp_cli_client_interface_requests_callback_for_add_request</primary></indexterm><programlisting><link linkend="void">void</link>                (*tp_cli_client_interface_requests_callback_for_add_request)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Signature of the callback called when a AddRequest method call
succeeds or fails.</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the proxy on which the call was made
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&#160;:</term>
<listitem><simpara> <link linkend="NULL--CAPS"><literal>NULL</literal></link> on success, or an error on failure
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> user-supplied object
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-interface-requests-call-add-request" role="function">
<title>tp_cli_client_interface_requests_call_add_request ()</title>
<indexterm zone="tp-cli-client-interface-requests-call-add-request"><primary sortas="tp_cli_client_interface_requests_call_add_request">tp_cli_client_interface_requests_call_add_request</primary></indexterm><programlisting><link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * tp_cli_client_interface_requests_call_add_request
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Request,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Properties,
                                                         <link linkend="tp-cli-client-interface-requests-callback-for-add-request">tp_cli_client_interface_requests_callback_for_add_request</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Start a AddRequest method call.
</para>
<para>
&lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;         &lt;p&gt;Called by the ChannelDispatcher to indicate that channels have been           requested, and that if the request is successful, they will probably           be handled by this Handler. The ChannelDispatcher SHOULD only           call this method on one handler per request.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;This allows the UI to start preparing to handle the channels             in advance (e.g. render a window with an &amp;quot;in progress&amp;quot; message),             improving perceived responsiveness.&lt;/p&gt;            &lt;p&gt;The use of &amp;quot;probably&amp;quot; is because you can&apos;t necessarily tell from             a channel request which handler will handle particular channels.             A reasonable heuristic would be to match the request against the             &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Handler&quot;&gt;HandlerChannelFilter&lt;/tp:dbus-ref&gt;,             and respect the preferred handler (if any).&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;If the request succeeds and is given to the expected Handler,           the Requests_Satisfied parameter to           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Handler&quot;&gt;HandleChannels&lt;/tp:dbus-ref&gt;           can be used to match the channel to a previous AddRequest call.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;This lets the UI direct the channels to the window that it             already opened.&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;If the request fails, the expected handler is notified by the           channel dispatcher calling its           &lt;tp:member-ref&gt;RemoveRequest&lt;/tp:member-ref&gt; method.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;This lets the UI close the window or display the error.&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;The channel dispatcher SHOULD remember which handler was notified,           and if the channel request succeeds, it SHOULD dispatch the channels           to the expected handler, unless the channels do not match that           handler&apos;s &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.Client.Handler&quot;&gt;HandlerChannelFilter&lt;/tp:dbus-ref&gt;.           If the channels are not dispatched to the expected handler, the           handler that was expected is notified by the channel dispatcher           calling its &lt;tp:member-ref&gt;RemoveRequest&lt;/tp:member-ref&gt; method           with the NotYours error.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;Expected handling is for the UI to close the window it             previously opened.&lt;/p&gt;         &lt;/tp:rationale&gt;          &lt;p&gt;Handlers SHOULD NOT return an error from this method; errors           returned from this method SHOULD NOT alter the channel dispatcher&apos;s           behaviour.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;Calls to this method are merely a notification.&lt;/p&gt;         &lt;/tp:rationale&gt;</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the <link linkend="TpProxy"><type>TpProxy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timeout_ms</parameter>&#160;:</term>
<listitem><simpara> the timeout in milliseconds, or -1 to use the
  default
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Request</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelRequest&lt;/tp:dbus-ref&gt;           object, which MUST have been returned by &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatcher&quot;&gt;CreateChannel&lt;/tp:dbus-ref&gt;           or &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatcher&quot;&gt;EnsureChannel&lt;/tp:dbus-ref&gt;           before this method is called.            &lt;tp:rationale&gt;             See those methods for the rationale of this ordering.           &lt;/tp:rationale&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Properties</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;p&gt;Some of the properties of the ChannelRequest. To avoid race             conditions, this dictionary MUST NOT include properties whose             values could subsequently change. It SHOULD include as many             properties as possible, given that constraint.&lt;/p&gt;            &lt;p&gt;In particular, the properties &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelRequest&quot;&gt;Requests&lt;/tp:dbus-ref&gt;             and &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelRequest&quot;&gt;UserActionTime&lt;/tp:dbus-ref&gt;             MUST be included.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&#160;:</term>
<listitem><simpara> called when the method call succeeds or fails;
  may be <link linkend="NULL--CAPS"><literal>NULL</literal></link> to make a "fire and forget" call with no 
  reply tracking
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data passed to the callback;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>destroy</parameter>&#160;:</term>
<listitem><simpara> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> If not <link linkend="NULL--CAPS"><literal>NULL</literal></link>, a <link linkend="GObject"><type>GObject</type></link> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if 
  <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> a <link linkend="TpProxyPendingCall"><type>TpProxyPendingCall</type></link> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <link linkend="TpProxy"><type>TpProxy</type></link> becomes invalid.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-interface-requests-callback-for-remove-request" role="function">
<title>tp_cli_client_interface_requests_callback_for_remove_request ()</title>
<indexterm zone="tp-cli-client-interface-requests-callback-for-remove-request"><primary sortas="tp_cli_client_interface_requests_callback_for_remove_request">tp_cli_client_interface_requests_callback_for_remove_request</primary></indexterm><programlisting><link linkend="void">void</link>                (*tp_cli_client_interface_requests_callback_for_remove_request)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Signature of the callback called when a RemoveRequest method call
succeeds or fails.</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the proxy on which the call was made
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&#160;:</term>
<listitem><simpara> <link linkend="NULL--CAPS"><literal>NULL</literal></link> on success, or an error on failure
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> user-supplied object
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-interface-requests-call-remove-request" role="function">
<title>tp_cli_client_interface_requests_call_remove_request ()</title>
<indexterm zone="tp-cli-client-interface-requests-call-remove-request"><primary sortas="tp_cli_client_interface_requests_call_remove_request">tp_cli_client_interface_requests_call_remove_request</primary></indexterm><programlisting><link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * tp_cli_client_interface_requests_call_remove_request
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="gchar">gchar</link> *in_Request,
                                                         const <link linkend="gchar">gchar</link> *in_Error,
                                                         const <link linkend="gchar">gchar</link> *in_Message,
                                                         <link linkend="tp-cli-client-interface-requests-callback-for-remove-request">tp_cli_client_interface_requests_callback_for_remove_request</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Start a RemoveRequest method call.
</para>
<para>
&lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;         &lt;p&gt;Called by the ChannelDispatcher to indicate that a request           previously passed to &lt;tp:member-ref&gt;AddRequest&lt;/tp:member-ref&gt;           has failed and should be disregarded.&lt;/p&gt;          &lt;p&gt;Handlers SHOULD NOT return an error from this method; errors           returned from this method SHOULD NOT alter the channel dispatcher&apos;s           behaviour.&lt;/p&gt;          &lt;tp:rationale&gt;           &lt;p&gt;Calls to this method are merely a notification.&lt;/p&gt;         &lt;/tp:rationale&gt;</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the <link linkend="TpProxy"><type>TpProxy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timeout_ms</parameter>&#160;:</term>
<listitem><simpara> the timeout in milliseconds, or -1 to use the
  default
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Request</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: The request that failed.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Error</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;The name of the D-Bus error with which the request failed.&lt;/p&gt;            &lt;p&gt;If this is &lt;code&gt;org.freedesktop.Telepathy.Error.NotYours&lt;/code&gt;,             this indicates that the request succeeded, but all the resulting             channels were given to some other handler.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Message</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: Any message supplied with the D-Bus error.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&#160;:</term>
<listitem><simpara> called when the method call succeeds or fails;
  may be <link linkend="NULL--CAPS"><literal>NULL</literal></link> to make a "fire and forget" call with no 
  reply tracking
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data passed to the callback;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>destroy</parameter>&#160;:</term>
<listitem><simpara> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> If not <link linkend="NULL--CAPS"><literal>NULL</literal></link>, a <link linkend="GObject"><type>GObject</type></link> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if 
  <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> a <link linkend="TpProxyPendingCall"><type>TpProxyPendingCall</type></link> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <link linkend="TpProxy"><type>TpProxy</type></link> becomes invalid.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-approver-callback-for-add-dispatch-operation" role="function">
<title>tp_cli_client_approver_callback_for_add_dispatch_operation ()</title>
<indexterm zone="tp-cli-client-approver-callback-for-add-dispatch-operation"><primary sortas="tp_cli_client_approver_callback_for_add_dispatch_operation">tp_cli_client_approver_callback_for_add_dispatch_operation</primary></indexterm><programlisting><link linkend="void">void</link>                (*tp_cli_client_approver_callback_for_add_dispatch_operation)
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         const <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Signature of the callback called when a AddDispatchOperation method call
succeeds or fails.</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the proxy on which the call was made
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&#160;:</term>
<listitem><simpara> <link linkend="NULL--CAPS"><literal>NULL</literal></link> on success, or an error on failure
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> user-supplied object
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="tp-cli-client-approver-call-add-dispatch-operation" role="function">
<title>tp_cli_client_approver_call_add_dispatch_operation ()</title>
<indexterm zone="tp-cli-client-approver-call-add-dispatch-operation"><primary sortas="tp_cli_client_approver_call_add_dispatch_operation">tp_cli_client_approver_call_add_dispatch_operation</primary></indexterm><programlisting><link linkend="TpProxyPendingCall">TpProxyPendingCall</link> * tp_cli_client_approver_call_add_dispatch_operation
                                                        (<link linkend="TpClient">TpClient</link> *proxy,
                                                         <link linkend="gint">gint</link> timeout_ms,
                                                         const <link linkend="GPtrArray">GPtrArray</link> *in_Channels,
                                                         const <link linkend="gchar">gchar</link> *in_DispatchOperation,
                                                         <link linkend="GHashTable">GHashTable</link> *in_Properties,
                                                         <link linkend="tp-cli-client-approver-callback-for-add-dispatch-operation">tp_cli_client_approver_callback_for_add_dispatch_operation</link> callback,
                                                         <link linkend="gpointer">gpointer</link> user_data,
                                                         <link linkend="GDestroyNotify">GDestroyNotify</link> destroy,
                                                         <link linkend="GObject">GObject</link> *weak_object);</programlisting>
<para>
Start a AddDispatchOperation method call.
</para>
<para>
&lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;         &lt;p&gt;Called by the channel dispatcher when a ChannelDispatchOperation           in which the approver has registered an interest is created,           or when the approver starts up while such channel dispatch           operations already exist.&lt;/p&gt;          &lt;p&gt;The channel dispatcher SHOULD call this method on all approvers           at the same time. If an approver returns an error from this method,           the approver is assumed to be faulty.&lt;/p&gt;          &lt;p&gt;If no approvers return from this method           successfully (including situations where there are no matching           approvers at all), the channel dispatcher SHOULD consider this           to be an error, and recover by dispatching the channel to the           most preferred handler.&lt;/p&gt;          &lt;tp:rationale&gt;           Processes that aren&apos;t approvers (or don&apos;t at least ensure that there           is some approver) probably shouldn&apos;t be making connections           anyway, so there should always be at least one approver running.         &lt;/tp:rationale&gt;</para>
<para>
</para><variablelist role="params">
<varlistentry><term><parameter>proxy</parameter>&#160;:</term>
<listitem><simpara> the <link linkend="TpProxy"><type>TpProxy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timeout_ms</parameter>&#160;:</term>
<listitem><simpara> the timeout in milliseconds, or -1 to use the
  default
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Channels</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;The initial value of the &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelDispatchOperation.Channels&lt;/tp:dbus-ref&gt;             property, containing the &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;Channel&lt;/tp:dbus-ref&gt;s             to be dispatched and their properties.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;This can&apos;t be signalled to the approver through the Properties               parameter of this method, because Channels is not an immutable               property.&lt;/p&gt;           &lt;/tp:rationale&gt;            &lt;p&gt;This argument always contains all of the channels in the channel             dispatch operation, even if not all of them actually match             the &lt;tp:member-ref&gt;ApproverChannelFilter&lt;/tp:member-ref&gt;.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;This seems the least bad way to handle such a situation;               see the discussion on               &lt;a href=&quot;http://bugs.freedesktop.org/show_bug.cgi?id=21090&quot;&gt;bug                 <link linkend="21090--CAPS"><type>21090</type></link>&lt;/a&gt;.&lt;/p&gt;           &lt;/tp:rationale&gt;            &lt;p&gt;The actual channels to be dispatched may reduce as channels are             closed: this is signalled by &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelDispatchOperation.ChannelLost&lt;/tp:dbus-ref&gt;.           &lt;/p&gt;            &lt;p&gt;Approvers SHOULD connect to ChannelLost and &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelDispatchOperation.Finished&lt;/tp:dbus-ref&gt;.             (if desired) before returning from AddDispatchOperation, since             those signals are guaranteed not to be emitted until after all             AddDispatchOperation calls have returned (with success or failure)             or timed out.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_DispatchOperation</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;tp:docstring xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;           &lt;p&gt;The           &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy&quot;&gt;ChannelDispatchOperation&lt;/tp:dbus-ref&gt;             to be processed.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>in_Properties</parameter>&#160;:</term>
<listitem><simpara> Used to pass an 'in' argument: &lt;p&gt;Properties of the channel dispatch operation. This MUST NOT             include properties that could change, SHOULD include as many             properties as possible given that constraint, and MUST include at             least the &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;Account&lt;/tp:dbus-ref&gt;,             &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;Connection&lt;/tp:dbus-ref&gt;             and &lt;tp:dbus-ref namespace=&quot;org.freedesktop.Telepathy.ChannelDispatchOperation&quot;&gt;PossibleHandlers&lt;/tp:dbus-ref&gt;             properties.&lt;/p&gt;
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&#160;:</term>
<listitem><simpara> called when the method call succeeds or fails;
  may be <link linkend="NULL--CAPS"><literal>NULL</literal></link> to make a "fire and forget" call with no 
  reply tracking
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&#160;:</term>
<listitem><simpara> user-supplied data passed to the callback;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>destroy</parameter>&#160;:</term>
<listitem><simpara> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>weak_object</parameter>&#160;:</term>
<listitem><simpara> If not <link linkend="NULL--CAPS"><literal>NULL</literal></link>, a <link linkend="GObject"><type>GObject</type></link> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <link linkend="NULL--CAPS"><literal>NULL</literal></link> if 
  <parameter>callback</parameter> is <link linkend="NULL--CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> a <link linkend="TpProxyPendingCall"><type>TpProxyPendingCall</type></link> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <link linkend="TpProxy"><type>TpProxy</type></link> becomes invalid.
</simpara></listitem></varlistentry>
</variablelist></refsect2>

</refsect1>




</refentry>
