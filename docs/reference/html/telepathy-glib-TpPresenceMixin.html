<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>telepathy-glib API Reference Manual: TpPresenceMixin</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="telepathy-glib API Reference Manual">
<link rel="up" href="ch-service-base.html" title="Service-side implementation">
<link rel="prev" href="TpBaseChannel.html" title="TpBaseChannel">
<link rel="next" href="telepathy-glib-TpPropertiesMixin.html" title="TpPropertiesMixin">
<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
                  <a href="#telepathy-glib-TpPresenceMixin.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
                  <a href="#telepathy-glib-TpPresenceMixin.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch-service-base.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="TpBaseChannel.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="telepathy-glib-TpPropertiesMixin.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="telepathy-glib-TpPresenceMixin"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="telepathy-glib-TpPresenceMixin.top_of_page"></a>TpPresenceMixin</span></h2>
<p>TpPresenceMixin — a mixin implementation of the Presence connection
 interface</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-can-set-on-self" title="tp_presence_status_spec_can_set_on_self ()">tp_presence_status_spec_can_set_on_self</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-get-name" title="tp_presence_status_spec_get_name ()">tp_presence_status_spec_get_name</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-get-presence-type" title="tp_presence_status_spec_get_presence_type ()">tp_presence_status_spec_get_presence_type</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-has-message" title="tp_presence_status_spec_has_message ()">tp_presence_status_spec_has_message</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="returnvalue">TpPresenceStatusSpec</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-new" title="tp_presence_status_spec_new ()">tp_presence_status_spec_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="returnvalue">TpPresenceStatusSpec</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-copy" title="tp_presence_status_spec_copy ()">tp_presence_status_spec_copy</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-free" title="tp_presence_status_spec_free ()">tp_presence_status_spec_free</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinStatusAvailableFunc" title="TpPresenceMixinStatusAvailableFunc ()">*TpPresenceMixinStatusAvailableFunc</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"><span class="returnvalue">GHashTable</span></a> *
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinGetContactStatusesFunc" title="TpPresenceMixinGetContactStatusesFunc ()">*TpPresenceMixinGetContactStatusesFunc</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinSetOwnStatusFunc" title="TpPresenceMixinSetOwnStatusFunc ()">*TpPresenceMixinSetOwnStatusFunc</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="returnvalue">guint</span></a>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinGetMaximumStatusMessageLengthFunc" title="TpPresenceMixinGetMaximumStatusMessageLengthFunc ()">*TpPresenceMixinGetMaximumStatusMessageLengthFunc</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="returnvalue">TpPresenceStatus</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-new" title="tp_presence_status_new ()">tp_presence_status_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-free" title="tp_presence_status_free ()">tp_presence_status_free</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()">tp_presence_mixin_class_init</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-init" title="tp_presence_mixin_init ()">tp_presence_mixin_init</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-finalize" title="tp_presence_mixin_finalize ()">tp_presence_mixin_finalize</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-emit-presence-update" title="tp_presence_mixin_emit_presence_update ()">tp_presence_mixin_emit_presence_update</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-emit-one-presence-update" title="tp_presence_mixin_emit_one_presence_update ()">tp_presence_mixin_emit_one_presence_update</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-iface-init" title="tp_presence_mixin_iface_init ()">tp_presence_mixin_iface_init</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-iface-init" title="tp_presence_mixin_simple_presence_iface_init ()">tp_presence_mixin_simple_presence_iface_init</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-init-dbus-properties" title="tp_presence_mixin_simple_presence_init_dbus_properties ()">tp_presence_mixin_simple_presence_init_dbus_properties</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-register-with-contacts-mixin" title="tp_presence_mixin_simple_presence_register_with_contacts_mixin ()">tp_presence_mixin_simple_presence_register_with_contacts_mixin</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<a name="TpPresenceStatusSpec"></a><div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusOptionalArgumentSpec" title="struct TpPresenceStatusOptionalArgumentSpec">TpPresenceStatusOptionalArgumentSpec</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec-struct" title="struct TpPresenceStatusSpec">TpPresenceStatusSpec</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus">TpPresenceStatus</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixin" title="struct TpPresenceMixin">TpPresenceMixin</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinClass" title="struct TpPresenceMixinClass">TpPresenceMixinClass</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GBoxed
    <span class="lineart">╰──</span> TpPresenceStatusSpec
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;telepathy-glib/telepathy-glib.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.description"></a><h2>Description</h2>
<p>This mixin can be added to a <a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a> subclass to implement the
SimplePresence and/or Presence interfaces. Implementing both interfaces
(as described below) is recommended. In particular, you must implement the
old-style Presence interface if compatibility with telepathy-glib
versions older than 0.11.13 is required.</p>
<p>To use the presence mixin, include a <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinClass" title="struct TpPresenceMixinClass"><span class="type">TpPresenceMixinClass</span></a> somewhere in your
class structure and a <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixin" title="struct TpPresenceMixin"><span class="type">TpPresenceMixin</span></a> somewhere in your instance structure,
and call <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a> from your class_init function,
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-init" title="tp_presence_mixin_init ()"><code class="function">tp_presence_mixin_init()</code></a> from your init function or constructor, and
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-finalize" title="tp_presence_mixin_finalize ()"><code class="function">tp_presence_mixin_finalize()</code></a> from your dispose or finalize function.</p>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id-1.6.12.8.4"></a>Implementing SimplePresence</h2></div></div></div>
<p>
  Since 0.7.13 this mixin supports the entire SimplePresence interface.
  You can implement <a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfaceSimplePresence"><span class="type">TpSvcConnectionInterfaceSimplePresence</span></a> as follows:
  </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><p>use the <a class="link" href="telepathy-glib-TpContactsMixin.html#TpContactsMixin" title="struct TpContactsMixin"><span class="type">TpContactsMixin</span></a> and
       <a class="link" href="telepathy-glib-dbus-properties-mixin.html" title="TpDBusPropertiesMixin">TpDBusPropertiesMixin</a>;</p></li>
<li class="listitem">
<p>pass <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-iface-init" title="tp_presence_mixin_simple_presence_iface_init ()"><code class="function">tp_presence_mixin_simple_presence_iface_init()</code></a> as an
        argument to <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-IMPLEMENT-INTERFACE:CAPS"><code class="function">G_IMPLEMENT_INTERFACE()</code></a>, like so:
      </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-DEFINE-TYPE-WITH-CODE:CAPS">G_DEFINE_TYPE_WITH_CODE</a></span> <span class="gtkdoc opt">(</span>MyConnection<span class="gtkdoc opt">,</span> my_connection<span class="gtkdoc opt">,</span>
    TP_TYPE_BASE_CONNECTION<span class="gtkdoc opt">,</span>
    <span class="gtkdoc slc">// ...</span>
    <span class="function"><a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-IMPLEMENT-INTERFACE:CAPS">G_IMPLEMENT_INTERFACE</a></span> <span class="gtkdoc opt">(</span>TP_TYPE_SVC_CONNECTION_INTERFACE_SIMPLE_PRESENCE<span class="gtkdoc opt">,</span>
        tp_presence_mixin_simple_presence_iface_init<span class="gtkdoc opt">);</span>
    <span class="gtkdoc slc">// ...</span>
    <span class="gtkdoc opt">)</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

</li>
<li class="listitem"><p>
        call <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-init-dbus-properties" title="tp_presence_mixin_simple_presence_init_dbus_properties ()"><code class="function">tp_presence_mixin_simple_presence_init_dbus_properties()</code></a> in the
        <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#GTypeInfo"><span class="type">GTypeInfo</span></a> class_init function;
      </p></li>
<li class="listitem"><p>
        call <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-simple-presence-register-with-contacts-mixin" title="tp_presence_mixin_simple_presence_register_with_contacts_mixin ()"><code class="function">tp_presence_mixin_simple_presence_register_with_contacts_mixin()</code></a>
        in the <a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObjectClass"><span class="type">GObjectClass</span></a> constructed function.
      </p></li>
</ul></div>
<p>
</p>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id-1.6.12.8.5"></a>Implementing old-style Presence</h2></div></div></div>
<p>
  This mixin also supports a large subset of the deprecated Presence
  interface. It does not support protocols where it is possible to set
  multiple statuses on yourself at once (all presence statuses will have the
  exclusive flag set), or last-activity-time information.
</p>
<p>
  To use the presence mixin as the implementation of
  <a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfacePresence"><span class="type">TpSvcConnectionInterfacePresence</span></a>, use <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-iface-init" title="tp_presence_mixin_iface_init ()"><code class="function">tp_presence_mixin_iface_init()</code></a> as
  the function you pass to <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-IMPLEMENT-INTERFACE:CAPS"><code class="function">G_IMPLEMENT_INTERFACE()</code></a>, as in the following
  example.  The presence mixin implements all of the D-Bus methods in the
  Presence interface.
</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-DEFINE-TYPE-WITH-CODE:CAPS">G_DEFINE_TYPE_WITH_CODE</a></span> <span class="gtkdoc opt">(</span>MyConnection<span class="gtkdoc opt">,</span> my_connection<span class="gtkdoc opt">,</span>
    TP_TYPE_BASE_CONNECTION<span class="gtkdoc opt">,</span>
    <span class="gtkdoc slc">// ...</span>
    <span class="function"><a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-IMPLEMENT-INTERFACE:CAPS">G_IMPLEMENT_INTERFACE</a></span> <span class="gtkdoc opt">(</span>TP_TYPE_SVC_CONNECTION_INTERFACE_PRESENCE<span class="gtkdoc opt">,</span>
        tp_presence_mixin_iface_init<span class="gtkdoc opt">);</span>
    <span class="gtkdoc slc">// ...</span>
    <span class="gtkdoc opt">)</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>
  In telepathy-glib versions older than 0.11.13, every connection
  that used the <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixin" title="struct TpPresenceMixin"><span class="type">TpPresenceMixin</span></a> was required to implement
  <a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfacePresence"><span class="type">TpSvcConnectionInterfacePresence</span></a>; failing to do so would lead to an
  assertion failure. Since 0.11.13, this is no longer required.
</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="tp-presence-status-spec-can-set-on-self"></a><h3>tp_presence_status_spec_can_set_on_self ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
tp_presence_status_spec_can_set_on_self
                               (<em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p></p>
<div class="refsect3">
<a name="id-1.6.12.9.2.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a presence status specification</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.2.6"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if the user can set this presence status on themselves (most
statuses), or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if they cannot directly set it on
themselves (typically used for <a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-OFFLINE:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_OFFLINE</code></a>
and <a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-ERROR:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_ERROR</code></a>)</p>
<p></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-get-name"></a><h3>tp_presence_status_spec_get_name ()</h3>
<pre class="programlisting">const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
tp_presence_status_spec_get_name (<em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p></p>
<div class="refsect3">
<a name="id-1.6.12.9.3.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a presence status specification</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.3.6"></a><h4>Returns</h4>
<p> the name of this presence status,
such as "available" or "out-to-lunch". </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-get-presence-type"></a><h3>tp_presence_status_spec_get_presence_type ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a>
tp_presence_status_spec_get_presence_type
                               (<em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p>Return the category into which this presence type falls. For instance,
for XMPP's "" (do not disturb) status, this would return
<a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-BUSY:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_BUSY</code></a>.</p>
<div class="refsect3">
<a name="id-1.6.12.9.4.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a presence status specification</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.4.6"></a><h4>Returns</h4>
<p> a <a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a></p>
<p></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-has-message"></a><h3>tp_presence_status_spec_has_message ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
tp_presence_status_spec_has_message (<em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p></p>
<div class="refsect3">
<a name="id-1.6.12.9.5.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a presence status specification</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.5.6"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if this presence status is accompanied by an optional
human-readable message</p>
<p></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-new"></a><h3>tp_presence_status_spec_new ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="returnvalue">TpPresenceStatusSpec</span></a> *
tp_presence_status_spec_new (<em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *name</code></em>,
                             <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a> type</code></em>,
                             <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="type">gboolean</span></a> can_set_on_self</code></em>,
                             <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="type">gboolean</span></a> has_message</code></em>);</pre>
<p></p>
<div class="refsect3">
<a name="id-1.6.12.9.6.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>name</p></td>
<td class="parameter_description"><p>the name of the new presence status</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>the category into which this presence status falls</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>can_set_on_self</p></td>
<td class="parameter_description"><p><a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if the user can set this presence status
on themselves</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>has_message</p></td>
<td class="parameter_description"><p><a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if this presence status is accompanied by an
optional human-readable message</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.6.6"></a><h4>Returns</h4>
<p> a new <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a>. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-copy"></a><h3>tp_presence_status_spec_copy ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="returnvalue">TpPresenceStatusSpec</span></a> *
tp_presence_status_spec_copy (<em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p>Copy a presence status specification.</p>
<p>If <em class="parameter"><code>self</code></em>
 has optional arguments other than a string named "message",
they are not copied. Optional arguments with other names or types
are deprecated.</p>
<div class="refsect3">
<a name="id-1.6.12.9.7.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a presence status specification</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.7.7"></a><h4>Returns</h4>
<p> a new <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> resembling <em class="parameter"><code>self</code></em>
. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-spec-free"></a><h3>tp_presence_status_spec_free ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_status_spec_free (<em class="parameter"><code><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *self</code></em>);</pre>
<p>Free a presence status specification produced by
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-new" title="tp_presence_status_spec_new ()"><code class="function">tp_presence_status_spec_new()</code></a> or <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-spec-copy" title="tp_presence_status_spec_copy ()"><code class="function">tp_presence_status_spec_copy()</code></a>.</p>
<div class="refsect3">
<a name="id-1.6.12.9.8.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p> a presence status specification. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since 0.23.1</p>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixinStatusAvailableFunc"></a><h3>TpPresenceMixinStatusAvailableFunc ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
<span class="c_punctuation">(</span>*TpPresenceMixinStatusAvailableFunc<span class="c_punctuation">)</span> (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                                       <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> which</code></em>);</pre>
<p>Signature of a callback to be used to determine if a given presence
status can be set on the connection. Most users of this mixin do not need to
supply an implementation of this callback: the value of
<span class="type">TpPresenceStatusSpec.self</span> is enough to determine whether this is a
user-settable presence, so <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> should be passed to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a> for this callback.</p>
<p>One place where this callback may be needed is on XMPP: not all server
implementation support the user becoming invisible. So an XMPP
implementation would implement this function, so that—once connected—the
hidden status is only available if the server supports it. Before the
connection is connected, this callback should return <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> for every status
that might possibly be supported: this allows the user to at least try to
sign in as invisible.</p>
<div class="refsect3">
<a name="id-1.6.12.9.9.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An instance of a <a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a> subclass implementing the presence
interface with this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>which</p></td>
<td class="parameter_description"><p>An index into the array of <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> provided to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.9.7"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if the status can be set on this connection; <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if not.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixinGetContactStatusesFunc"></a><h3>TpPresenceMixinGetContactStatusesFunc ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"><span class="returnvalue">GHashTable</span></a> *
<span class="c_punctuation">(</span>*TpPresenceMixinGetContactStatusesFunc<span class="c_punctuation">)</span>
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                                <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Arrays.html#GArray"><span class="type">GArray</span></a> *contacts</code></em>,
                                <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Signature of the callback used to get the stored presence status of
contacts. The returned hash table should have contact handles mapped to
their respective presence statuses in <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="type">TpPresenceStatus</span></a> structs.</p>
<p>The returned hash table will be freed with g_hash_table_unref. The
callback is responsible for ensuring that this does any cleanup that
may be necessary.</p>
<div class="refsect3">
<a name="id-1.6.12.9.10.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An object with this mixin.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>contacts</p></td>
<td class="parameter_description"><p>An array of <a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> for the contacts to get presence status for</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Used to return a Telepathy D-Bus error if <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> is returned</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.10.7"></a><h4>Returns</h4>
<p> The contact presence on success, <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> with
error set on error. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixinSetOwnStatusFunc"></a><h3>TpPresenceMixinSetOwnStatusFunc ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
<span class="c_punctuation">(</span>*TpPresenceMixinSetOwnStatusFunc<span class="c_punctuation">)</span> (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                                    <em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="type">TpPresenceStatus</span></a> *status</code></em>,
                                    <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Signature of the callback used to commit changes to the user's own presence
status in SetStatuses. It is also used in ClearStatus and RemoveStatus to
reset the user's own status back to the "default" one with a <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> status
argument.</p>
<p>The optional_arguments hash table in <em class="parameter"><code>status</code></em>
, if not NULL, will have been
filtered so it only contains recognised parameters, so the callback
need not (and cannot) check for unrecognised parameters. However, the
types of the parameters are not currently checked, so the callback is
responsible for doing so.</p>
<p>The callback is responsible for emitting PresenceUpdate, if appropriate,
by calling <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-emit-presence-update" title="tp_presence_mixin_emit_presence_update ()"><code class="function">tp_presence_mixin_emit_presence_update()</code></a>.</p>
<div class="refsect3">
<a name="id-1.6.12.9.11.7"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An object with this mixin.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>The status to set, or NULL for whatever the protocol defines as a
"default" status</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Used to return a Telepathy D-Bus error if <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> is returned</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.11.8"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if the operation was successful, <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if not.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixinGetMaximumStatusMessageLengthFunc"></a><h3>TpPresenceMixinGetMaximumStatusMessageLengthFunc ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="returnvalue">guint</span></a>
<span class="c_punctuation">(</span>*TpPresenceMixinGetMaximumStatusMessageLengthFunc<span class="c_punctuation">)</span>
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>);</pre>
<p>Signature of a callback used to determine the maximum length of status
messages. If this callback is provided and returns non-zero, the
<a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinSetOwnStatusFunc" title="TpPresenceMixinSetOwnStatusFunc ()"><span class="type">TpPresenceMixinSetOwnStatusFunc</span></a> implementation is responsible for
truncating the message to fit this limit, if necessary.</p>
<div class="refsect3">
<a name="id-1.6.12.9.12.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An object with this mixin.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.12.6"></a><h4>Returns</h4>
<p> the maximum number of UTF-8 characters which may appear in a status
message, or 0 if there is no limit.</p>
<p></p>
</div>
<p class="since">Since 0.14.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-new"></a><h3>tp_presence_status_new ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="returnvalue">TpPresenceStatus</span></a> *
tp_presence_status_new (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> which</code></em>,
                        <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"><span class="type">GHashTable</span></a> *optional_arguments</code></em>);</pre>
<p>Construct a presence status structure. You should free the returned
structure with <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-status-free" title="tp_presence_status_free ()"><span class="type">tp_presence_status_free</span></a>.</p>
<p>In modern Telepathy connection managers, the only optional
argument should be a <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-TYPE-STRING:CAPS"><code class="literal">G_TYPE_STRING</code></a> named "message", on statuses
that have an optional human-readable message. All other optional arguments
are deprecated.</p>
<div class="refsect3">
<a name="id-1.6.12.9.13.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>which</p></td>
<td class="parameter_description"><p>Index of the presence status in the provided supported presence
statuses array</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>optional_arguments</p></td>
<td class="parameter_description"><p>Optional arguments for the presence statuses. Can be
NULL if there are no optional arguments. The presence status object makes a
copy of the hashtable, so you should free the original.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.12.9.13.7"></a><h4>Returns</h4>
<p> A pointer to the newly allocated presence status structure.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-status-free"></a><h3>tp_presence_status_free ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_status_free (<em class="parameter"><code><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="type">TpPresenceStatus</span></a> *status</code></em>);</pre>
<p>Deallocate all resources associated with a presence status structure.</p>
<div class="refsect3">
<a name="id-1.6.12.9.14.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>A pointer to the presence status structure to free.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-class-init"></a><h3>tp_presence_mixin_class_init ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_class_init (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObjectClass"><span class="type">GObjectClass</span></a> *obj_cls</code></em>,
                              <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#glong"><span class="type">glong</span></a> offset</code></em>,
                              <em class="parameter"><code><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinStatusAvailableFunc" title="TpPresenceMixinStatusAvailableFunc ()"><span class="type">TpPresenceMixinStatusAvailableFunc</span></a> status_available</code></em>,
                              <em class="parameter"><code><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinGetContactStatusesFunc" title="TpPresenceMixinGetContactStatusesFunc ()"><span class="type">TpPresenceMixinGetContactStatusesFunc</span></a> get_contact_statuses</code></em>,
                              <em class="parameter"><code><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinSetOwnStatusFunc" title="TpPresenceMixinSetOwnStatusFunc ()"><span class="type">TpPresenceMixinSetOwnStatusFunc</span></a> set_own_status</code></em>,
                              <em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *statuses</code></em>);</pre>
<p>Initialize the presence mixin. Should be called from the implementation's
class_init function like so:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init">tp_presence_mixin_class_init</a></span> <span class="gtkdoc opt">((</span>GObjectClass <span class="gtkdoc opt">*)</span> klass<span class="gtkdoc opt">,</span>
                              <span class="function"><a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#G-STRUCT-OFFSET:CAPS">G_STRUCT_OFFSET</a></span> <span class="gtkdoc opt">(</span>SomeObjectClass<span class="gtkdoc opt">,</span>
                                               presence_mixin<span class="gtkdoc opt">));</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="refsect3">
<a name="id-1.6.12.9.15.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj_cls</p></td>
<td class="parameter_description"><p>The class of the implementation that uses this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>offset</p></td>
<td class="parameter_description"><p>The byte offset of the TpPresenceMixinClass within the class
structure</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status_available</p></td>
<td class="parameter_description"><p>A callback to be used to determine if a given presence
status can be set on a particular connection. Should usually be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, to
consider all statuses with <span class="type">TpPresenceStatusSpec.self</span> set to <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> to be
settable.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>get_contact_statuses</p></td>
<td class="parameter_description"><p>A callback to be used get the current presence status
for contacts. This is used in implementations of various D-Bus methods and
hence must be provided.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>set_own_status</p></td>
<td class="parameter_description"><p>A callback to be used to commit changes to the user's own
presence status to the server. This is used in implementations of various
D-Bus methods and hence must be provided.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>statuses</p></td>
<td class="parameter_description"><p>An array of <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> structures representing all
presence statuses supported by the protocol, terminated by a NULL name.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-init"></a><h3>tp_presence_mixin_init ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_init (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                        <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#glong"><span class="type">glong</span></a> offset</code></em>);</pre>
<p>Initialize the presence mixin. Should be called from the implementation's
instance init function like so:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-init">tp_presence_mixin_init</a></span> <span class="gtkdoc opt">((</span>GObject <span class="gtkdoc opt">*)</span> self<span class="gtkdoc opt">,</span>
                        <span class="function"><a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#G-STRUCT-OFFSET:CAPS">G_STRUCT_OFFSET</a></span> <span class="gtkdoc opt">(</span>SomeObject<span class="gtkdoc opt">,</span> presence_mixin<span class="gtkdoc opt">));</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="refsect3">
<a name="id-1.6.12.9.16.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An instance of the implementation that uses this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>offset</p></td>
<td class="parameter_description"><p>The byte offset of the TpPresenceMixin within the object structure</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-finalize"></a><h3>tp_presence_mixin_finalize ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_finalize (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>);</pre>
<p>Free resources held by the presence mixin.</p>
<div class="refsect3">
<a name="id-1.6.12.9.17.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An object with this mixin.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-emit-presence-update"></a><h3>tp_presence_mixin_emit_presence_update ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_emit_presence_update
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                                <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"><span class="type">GHashTable</span></a> *contact_presences</code></em>);</pre>
<p>Emit the PresenceUpdate signal for multiple contacts. For emitting
PresenceUpdate for a single contact, there is a convenience wrapper called
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-emit-one-presence-update" title="tp_presence_mixin_emit_one_presence_update ()"><span class="type">tp_presence_mixin_emit_one_presence_update</span></a>.</p>
<div class="refsect3">
<a name="id-1.6.12.9.18.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>A connection object with this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>contact_presences</p></td>
<td class="parameter_description"><p>A mapping of contact handles to <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="type">TpPresenceStatus</span></a>
structures with the presence data to emit</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-emit-one-presence-update"></a><h3>tp_presence_mixin_emit_one_presence_update ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_emit_one_presence_update
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>,
                                <em class="parameter"><code><a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> handle</code></em>,
                                <em class="parameter"><code>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatus" title="struct TpPresenceStatus"><span class="type">TpPresenceStatus</span></a> *status</code></em>);</pre>
<p>Emit the PresenceUpdate signal for a single contact. This method is just a
convenience wrapper around <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-emit-presence-update" title="tp_presence_mixin_emit_presence_update ()"><span class="type">tp_presence_mixin_emit_presence_update</span></a>.</p>
<div class="refsect3">
<a name="id-1.6.12.9.19.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>A connection object with this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>handle</p></td>
<td class="parameter_description"><p>The handle of the contact to emit the signal for</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>The new status to emit</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-iface-init"></a><h3>tp_presence_mixin_iface_init ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_iface_init (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> g_iface</code></em>,
                              <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> iface_data</code></em>);</pre>
<p>Fill in the vtable entries needed to implement the presence interface using
this mixin. This function should usually be called via G_IMPLEMENT_INTERFACE.</p>
<div class="refsect3">
<a name="id-1.6.12.9.20.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>g_iface</p></td>
<td class="parameter_description"><p>A pointer to the <a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfacePresenceClass" title="TpSvcConnectionInterfacePresenceClass"><span class="type">TpSvcConnectionInterfacePresenceClass</span></a> in an
object class</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>iface_data</p></td>
<td class="parameter_description"><p>Ignored</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-simple-presence-iface-init"></a><h3>tp_presence_mixin_simple_presence_iface_init ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_simple_presence_iface_init
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> g_iface</code></em>,
                                <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> iface_data</code></em>);</pre>
<p>Fill in the vtable entries needed to implement the simple presence interface
using this mixin. This function should usually be called via
G_IMPLEMENT_INTERFACE.</p>
<div class="refsect3">
<a name="id-1.6.12.9.21.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>g_iface</p></td>
<td class="parameter_description"><p>A pointer to the <a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfaceSimplePresenceClass" title="TpSvcConnectionInterfaceSimplePresenceClass"><span class="type">TpSvcConnectionInterfaceSimplePresenceClass</span></a> in
an object class</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>iface_data</p></td>
<td class="parameter_description"><p>Ignored</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.7.13</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-simple-presence-init-dbus-properties"></a><h3>tp_presence_mixin_simple_presence_init_dbus_properties ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_simple_presence_init_dbus_properties
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObjectClass"><span class="type">GObjectClass</span></a> *cls</code></em>);</pre>
<p>Set up <a class="link" href="telepathy-glib-dbus-properties-mixin.html#TpDBusPropertiesMixinClass" title="TpDBusPropertiesMixinClass"><span class="type">TpDBusPropertiesMixinClass</span></a> to use this mixin's implementation of
the SimplePresence interface's properties.</p>
<p>This automatically sets up a list of the supported properties for the
SimplePresence interface.</p>
<div class="refsect3">
<a name="id-1.6.12.9.22.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>cls</p></td>
<td class="parameter_description"><p>The class of an object with this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since 0.7.13</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-presence-mixin-simple-presence-register-with-contacts-mixin"></a><h3>tp_presence_mixin_simple_presence_register_with_contacts_mixin ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_presence_mixin_simple_presence_register_with_contacts_mixin
                               (<em class="parameter"><code><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> *obj</code></em>);</pre>
<p>Register the SimplePresence interface with the Contacts interface to make it
inspectable. The Contacts mixin should be initialized before this function
is called</p>
<div class="refsect3">
<a name="id-1.6.12.9.23.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>obj</p></td>
<td class="parameter_description"><p>An instance that of the implementation that uses both the Contacts
mixin and this mixin</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="TpPresenceStatusOptionalArgumentSpec"></a><h3>struct TpPresenceStatusOptionalArgumentSpec</h3>
<pre class="programlisting">struct TpPresenceStatusOptionalArgumentSpec {
    const gchar *name;
    const gchar *dtype;
};
</pre>
<p>Structure specifying a supported optional argument for a presence status.</p>
<p>In addition to the fields documented here, there are two gpointer fields
which must currently be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. A meaning may be defined for these in a
future version of telepathy-glib.</p>
<div class="refsect3">
<a name="id-1.6.12.10.2.6"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *<em class="structfield"><code><a name="TpPresenceStatusOptionalArgumentSpec.name"></a>name</code></em>;</p></td>
<td class="struct_member_description"><p>Name of the argument as passed over D-Bus</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *<em class="structfield"><code><a name="TpPresenceStatusOptionalArgumentSpec.dtype"></a>dtype</code></em>;</p></td>
<td class="struct_member_description"><p>D-Bus type signature of the argument</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceStatusSpec-struct"></a><h3>struct TpPresenceStatusSpec</h3>
<pre class="programlisting">struct TpPresenceStatusSpec {
    const gchar *name;
    TpConnectionPresenceType presence_type;
    gboolean self;
    const TpPresenceStatusOptionalArgumentSpec *optional_arguments;
};
</pre>
<p>Structure specifying a supported presence status.</p>
<p>In addition to the fields documented here, there are two gpointer fields
which must currently be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. A meaning may be defined for these in a
future version of telepathy-glib.</p>
<div class="refsect3">
<a name="id-1.6.12.10.3.6"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *<em class="structfield"><code><a name="TpPresenceStatusSpec-struct.name"></a>name</code></em>;</p></td>
<td class="struct_member_description"><p>String identifier of the presence status</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a> <em class="structfield"><code><a name="TpPresenceStatusSpec-struct.presence-type"></a>presence_type</code></em>;</p></td>
<td class="struct_member_description"><p>A type value, as specified by <a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a></p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="type">gboolean</span></a> <em class="structfield"><code><a name="TpPresenceStatusSpec-struct.self"></a>self</code></em>;</p></td>
<td class="struct_member_description"><p>Indicates if this status may be set on yourself</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusOptionalArgumentSpec" title="struct TpPresenceStatusOptionalArgumentSpec"><span class="type">TpPresenceStatusOptionalArgumentSpec</span></a> *<em class="structfield"><code><a name="TpPresenceStatusSpec-struct.optional-arguments"></a>optional_arguments</code></em>;</p></td>
<td class="struct_member_description"><p>An array of <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusOptionalArgumentSpec" title="struct TpPresenceStatusOptionalArgumentSpec"><span class="type">TpPresenceStatusOptionalArgumentSpec</span></a>
structures representing the optional arguments for this status, terminated
by a NULL name. If there are no optional arguments for a status, this can
be NULL. In modern Telepathy connection managers, the only optional
argument should be a string (type "s") named "message" on statuses
that have an optional human-readable message. All other optional arguments
are deprecated.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceStatus"></a><h3>struct TpPresenceStatus</h3>
<pre class="programlisting">struct TpPresenceStatus {
    guint index;
    GHashTable *optional_arguments;
};
</pre>
<p>Structure representing a presence status.</p>
<p>In addition to the fields documented here, there are two gpointer fields
which must currently be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. A meaning may be defined for these in a
future version of telepathy-glib.</p>
<p>In modern Telepathy connection managers, the only optional
argument should be a <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#G-TYPE-STRING:CAPS"><code class="literal">G_TYPE_STRING</code></a> named "message", on statuses
that have an optional human-readable message. All other optional arguments
are deprecated.</p>
<div class="refsect3">
<a name="id-1.6.12.10.4.7"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> <em class="structfield"><code><a name="TpPresenceStatus.index"></a>index</code></em>;</p></td>
<td class="struct_member_description"><p>Index of the presence status in the provided supported presence
statuses array</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"><span class="type">GHashTable</span></a> *<em class="structfield"><code><a name="TpPresenceStatus.optional-arguments"></a>optional_arguments</code></em>;</p></td>
<td class="struct_member_description"><p>A GHashTable mapping of string identifiers to GValues
of the optional status arguments, if any. If there are no optional
arguments, this pointer may be NULL.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixin"></a><h3>struct TpPresenceMixin</h3>
<pre class="programlisting">struct TpPresenceMixin {
};
</pre>
<p>Structure to be included in the instance structure of objects that
use this mixin. Initialize it with <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-init" title="tp_presence_mixin_init ()"><code class="function">tp_presence_mixin_init()</code></a>.</p>
<p>There are no public fields.</p>
</div>
<hr>
<div class="refsect2">
<a name="TpPresenceMixinClass"></a><h3>struct TpPresenceMixinClass</h3>
<pre class="programlisting">struct TpPresenceMixinClass {
    TpPresenceMixinStatusAvailableFunc status_available;
    TpPresenceMixinGetContactStatusesFunc get_contact_statuses;
    TpPresenceMixinSetOwnStatusFunc set_own_status;

    const TpPresenceStatusSpec *statuses;

    TpPresenceMixinGetMaximumStatusMessageLengthFunc get_maximum_status_message_length;
};
</pre>
<p>Structure to be included in the class structure of objects that
use this mixin. Initialize it with <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a>.</p>
<p>If the protocol imposes a limit on the length of status messages, one should
implement <em class="parameter"><code>get_maximum_status_message_length</code></em>
. If this callback is not
implemented, it is assumed that there is no limit. The callback function
should be set after calling <a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a>, like so:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7</pre></td>
        <td class="listing_code"><pre class="programlisting">TpPresenceMixinClass <span class="gtkdoc opt">*</span>mixin_class<span class="gtkdoc opt">;</span>

<span class="function"><a href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init">tp_presence_mixin_class_init</a></span> <span class="gtkdoc opt">((</span>GObjectClass <span class="gtkdoc opt">*)</span> klass<span class="gtkdoc opt">,</span>
    <span class="function"><a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#G-STRUCT-OFFSET:CAPS">G_STRUCT_OFFSET</a></span> <span class="gtkdoc opt">(</span>SomeObjectClass<span class="gtkdoc opt">,</span> presence_mixin<span class="gtkdoc opt">));</span>
mixin_class <span class="gtkdoc opt">=</span> <span class="function">TP_PRESENCE_MIXIN_CLASS</span> <span class="gtkdoc opt">(</span>klass<span class="gtkdoc opt">);</span>
mixin_class<span class="gtkdoc opt">-&gt;</span>get_maximum_status_message_length <span class="gtkdoc opt">=</span>
    some_object_get_maximum_status_message_length<span class="gtkdoc opt">;</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
<p>All other fields should be considered read-only.</p>
<div class="refsect3">
<a name="id-1.6.12.10.6.9"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinStatusAvailableFunc" title="TpPresenceMixinStatusAvailableFunc ()"><span class="type">TpPresenceMixinStatusAvailableFunc</span></a> <em class="structfield"><code><a name="TpPresenceMixinClass.status-available"></a>status_available</code></em>;</p></td>
<td class="struct_member_description"><p>The status-available function that was passed to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a></p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinGetContactStatusesFunc" title="TpPresenceMixinGetContactStatusesFunc ()"><span class="type">TpPresenceMixinGetContactStatusesFunc</span></a> <em class="structfield"><code><a name="TpPresenceMixinClass.get-contact-statuses"></a>get_contact_statuses</code></em>;</p></td>
<td class="struct_member_description"><p>The get-contact-statuses function that was passed to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a></p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinSetOwnStatusFunc" title="TpPresenceMixinSetOwnStatusFunc ()"><span class="type">TpPresenceMixinSetOwnStatusFunc</span></a> <em class="structfield"><code><a name="TpPresenceMixinClass.set-own-status"></a>set_own_status</code></em>;</p></td>
<td class="struct_member_description"><p>The set-own-status function that was passed to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a></p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p>const <a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceStatusSpec"><span class="type">TpPresenceStatusSpec</span></a> *<em class="structfield"><code><a name="TpPresenceMixinClass.statuses"></a>statuses</code></em>;</p></td>
<td class="struct_member_description"><p>The presence statuses array that was passed to
<a class="link" href="telepathy-glib-TpPresenceMixin.html#tp-presence-mixin-class-init" title="tp_presence_mixin_class_init ()"><code class="function">tp_presence_mixin_class_init()</code></a></p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="telepathy-glib-TpPresenceMixin.html#TpPresenceMixinGetMaximumStatusMessageLengthFunc" title="TpPresenceMixinGetMaximumStatusMessageLengthFunc ()"><span class="type">TpPresenceMixinGetMaximumStatusMessageLengthFunc</span></a> <em class="structfield"><code><a name="TpPresenceMixinClass.get-maximum-status-message-length"></a>get_maximum_status_message_length</code></em>;</p></td>
<td class="struct_member_description"><p>The callback used to discover the
the limit for status messages length, if any. Since: 0.14.5</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-TpPresenceMixin.see-also"></a><h2>See Also</h2>
<p><a class="link" href="telepathy-glib-svc-connection.html#TpSvcConnectionInterfacePresence"><span class="type">TpSvcConnectionInterfacePresence</span></a></p>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.20</div>
</body>
</html>