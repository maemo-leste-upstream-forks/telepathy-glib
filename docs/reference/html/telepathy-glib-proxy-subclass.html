<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>TpProxy subclasses and mixins</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="telepathy-glib Reference Manual">
<link rel="up" href="ch-dbus.html" title="General D-Bus support">
<link rel="prev" href="telepathy-glib-dbus.html" title="D-Bus utilities">
<link rel="next" href="ch-protocol.html" title="The Telepathy protocol">
<meta name="generator" content="GTK-Doc V1.9 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch-dbus.html" title="General D-Bus support">
<link rel="chapter" href="ch-protocol.html" title="The Telepathy protocol">
<link rel="chapter" href="ch-client.html" title="Client-side proxies">
<link rel="chapter" href="ch-service-dbus.html" title="Service-side D-Bus interfaces">
<link rel="chapter" href="ch-service-base.html" title="Service-side implementation">
<link rel="chapter" href="ch-service-handles.html" title="Service-side handle repositories">
<link rel="chapter" href="ch-utilities.html" title="Utilities">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="telepathy-glib-dbus.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch-dbus.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">telepathy-glib Reference Manual</th>
<td><a accesskey="n" href="ch-protocol.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2609610" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2627980" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="telepathy-glib-proxy-subclass"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2609610"></a><span class="refentrytitle">TpProxy subclasses and mixins</span>
</h2>
<p>TpProxy subclasses and mixins &#8212; Providing extra functionality for a <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> or
 subclass, or subclassing it</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;telepathy-glib/proxy-subclass.h&gt;


<a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a>*         <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-add-interface-by-id">tp_proxy_add_interface_by_id</a>        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface);
<a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a>*         <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-borrow-interface-by-id">tp_proxy_borrow_interface_by_id</a>     (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         GError **error);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-invalidate">tp_proxy_invalidate</a>                 (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         const GError *error);
void                (<a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInterfaceAddedCb">*TpProxyInterfaceAddedCb</a>)          (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         guint quark,
                                                         <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a> *proxy,
                                                         gpointer unused);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-or-subclass-hook-on-interface-add">tp_proxy_or_subclass_hook_on_interface_add</a>
                                                        (GType proxy_or_subclass,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInterfaceAddedCb">TpProxyInterfaceAddedCb</a> callback);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-subclass-add-error-mapping">tp_proxy_subclass_add_error_mapping</a> (GType proxy_subclass,
                                                         const gchar *static_prefix,
                                                         GQuark domain,
                                                         GType code_enum_type);

void                (<a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc">*TpProxyInvokeFunc</a>)                (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GError *error,
                                                         GValueArray *args,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GObject *weak_object);
<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a>* <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new">tp_proxy_pending_call_v0_new</a>        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         const gchar *member,
                                                         <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a> *iface_proxy,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc">TpProxyInvokeFunc</a> invoke_callback,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GDestroyNotify destroy,
                                                         GObject *weak_object,
                                                         gboolean cancel_must_raise);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-completed">tp_proxy_pending_call_v0_completed</a>  (gpointer p);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-take-pending-call">tp_proxy_pending_call_v0_take_pending_call</a>
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a> *pc,
                                                         DBusGProxyCall *pending_call);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-take-results">tp_proxy_pending_call_v0_take_results</a>
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a> *pc,
                                                         GError *error,
                                                         GValueArray *args);
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection">TpProxySignalConnection</a>* <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-signal-connection-v0-new">tp_proxy_signal_connection_v0_new</a>
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         const gchar *member,
                                                         const GType *expected_types,
                                                         GCallback collect_args,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc">TpProxyInvokeFunc</a> invoke_callback,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GDestroyNotify destroy,
                                                         GObject *weak_object,
                                                         GError **error);
void                <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-signal-connection-v0-take-results">tp_proxy_signal_connection_v0_take_results</a>
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection">TpProxySignalConnection</a> *sc,
                                                         GValueArray *args);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2627980"></a><h2>Description</h2>
<p>
The implementations of <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclasses and "mixin" functions need
access to the underlying dbus-glib objects used to implement the
<a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> API.
</p>
<p>
Mixin functions to implement particular D-Bus interfaces should usually
be auto-generated, by copying tools/glib-client-gen.py from telepathy-glib.</p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2628021"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2628032"></a><h3>
<a name="tp-proxy-add-interface-by-id"></a>tp_proxy_add_interface_by_id ()</h3>
<a class="indexterm" name="id2628048"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a>*         tp_proxy_add_interface_by_id        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface);</pre>
<p>
Declare that this proxy supports a given interface, and allocate a
<a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a> to access it.
</p>
<p>
To use methods and signals of that interface, either call
<a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-borrow-interface-by-id"><code class="function">tp_proxy_borrow_interface_by_id()</code></a> to get the <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a>, or use the
tp_cli_* wrapper functions (strongly recommended).
</p>
<p>
If the interface is the proxy's "main interface", or has already been
added, then do nothing.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> the TpProxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>interface</code></em>&#160;:</span></p></td>
<td> quark representing the interface to be added
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the borrowed DBusGProxy

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2632200"></a><h3>
<a name="tp-proxy-borrow-interface-by-id"></a>tp_proxy_borrow_interface_by_id ()</h3>
<a class="indexterm" name="id2632215"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a>*         tp_proxy_borrow_interface_by_id     (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         GError **error);</pre>
<p>
</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> the TpProxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>interface</code></em>&#160;:</span></p></td>
<td> quark representing the interface required
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> used to raise TP_DBUS_ERROR_NO_INTERFACE if this object does not
have the required interface
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a borrowed reference to a <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a>
for which the bus name and object path are the same as for <em class="parameter"><code>self</code></em>, but the
interface is as given (or <code class="literal">NULL</code> if this proxy does not implement it).
The reference is only valid as long as <em class="parameter"><code>self</code></em> is.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2632359"></a><h3>
<a name="tp-proxy-invalidate"></a>tp_proxy_invalidate ()</h3>
<a class="indexterm" name="id2632374"></a><pre class="programlisting">void                tp_proxy_invalidate                 (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         const GError *error);</pre>
<p>
Mark <em class="parameter"><code>self</code></em> as having been invalidated - no further calls will work, and
if not already invalidated, the <span class="type">"invalidated"</span> signal will be emitted
with the given error.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> a proxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> an error causing the invalidation
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2632467"></a><h3>
<a name="TpProxyInterfaceAddedCb"></a>TpProxyInterfaceAddedCb ()</h3>
<a class="indexterm" name="id2632480"></a><pre class="programlisting">void                (*TpProxyInterfaceAddedCb)          (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         guint quark,
                                                         <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a> *proxy,
                                                         gpointer unused);</pre>
<p>
The signature of a <a class="link" href="telepathy-glib-proxy.html#TpProxy-interface-added"><span class="type">"interface-added"</span></a> signal callback.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> the proxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>quark</code></em>&#160;:</span></p></td>
<td> a quark whose string value is the interface being added
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em>&#160;:</span></p></td>
<td> the <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a> for the added interface
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>unused</code></em>&#160;:</span></p></td>
<td> unused
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2632615"></a><h3>
<a name="tp-proxy-or-subclass-hook-on-interface-add"></a>tp_proxy_or_subclass_hook_on_interface_add ()</h3>
<a class="indexterm" name="id2632632"></a><pre class="programlisting">void                tp_proxy_or_subclass_hook_on_interface_add
                                                        (GType proxy_or_subclass,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInterfaceAddedCb">TpProxyInterfaceAddedCb</a> callback);</pre>
<p>
Arrange for <em class="parameter"><code>callback</code></em> to be connected to <a class="link" href="telepathy-glib-proxy.html#TpProxy-interface-added"><span class="type">"interface-added"</span></a>
during the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> constructor. This is done sufficiently early that
it will see the signal for the default interface (<em class="parameter"><code>interface</code></em> member of
<a class="link" href="telepathy-glib-proxy.html#TpProxyClass"><span class="type">TpProxyClass</span></a>), if any, being added. The intended use is for the callback
to call <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#dbus-g-proxy-add-signal"
><code class="function">dbus_g_proxy_add_signal()</code></a> on the new <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy_or_subclass</code></em>&#160;:</span></p></td>
<td> The <span class="type">GType</span> of <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> or a subclass
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em>&#160;:</span></p></td>
<td> A signal handler for <a class="link" href="telepathy-glib-proxy.html#TpProxy-interface-added"><span class="type">"interface-added"</span></a>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2632783"></a><h3>
<a name="tp-proxy-subclass-add-error-mapping"></a>tp_proxy_subclass_add_error_mapping ()</h3>
<a class="indexterm" name="id2632800"></a><pre class="programlisting">void                tp_proxy_subclass_add_error_mapping (GType proxy_subclass,
                                                         const gchar *static_prefix,
                                                         GQuark domain,
                                                         GType code_enum_type);</pre>
<p>
Register a mapping from D-Bus errors received from the given proxy
subclass to <span class="type">GError</span> instances.
</p>
<p>
When a D-Bus error is received, the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> code checks for error
mappings registered for the class of the proxy receiving the error,
then for all of its parent classes.
</p>
<p>
If there is an error mapping for which the D-Bus error name
starts with the mapping's <em class="parameter"><code>static_prefix</code></em>, the proxy will check the
corresponding <em class="parameter"><code>code_enum_type</code></em> for a value whose <em class="parameter"><code>value_nick</code></em> is
the rest of the D-Bus error name (with the leading dot removed). If there
isn't such a value, it will continue to try other error mappings.
</p>
<p>
If a suitable error mapping and code are found, the <span class="type">GError</span> that is raised
will have its error domain set to the <em class="parameter"><code>domain</code></em> from the error mapping,
and its error code taken from the enum represented by the <em class="parameter"><code>code_enum_type</code></em>.
</p>
<p>
If no suitable error mapping or code is found, the <span class="type">GError</span> will have
error domain <a class="link" href="telepathy-glib-proxy.html#TP-DBUS-ERRORS:CAPS"><code class="literal">TP_DBUS_ERRORS</code></a> and error code
<a class="link" href="telepathy-glib-proxy.html#TP-DBUS-ERROR-UNKNOWN-REMOTE-ERROR:CAPS"><code class="literal">TP_DBUS_ERROR_UNKNOWN_REMOTE_ERROR</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy_subclass</code></em>&#160;:</span></p></td>
<td> The <span class="type">GType</span> of a subclass of <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> (which must not be
 <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> itself)
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>static_prefix</code></em>&#160;:</span></p></td>
<td> A prefix for D-Bus error names, not including the trailing
 dot (which must remain valid forever, and should usually be in static
 storage)
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>domain</code></em>&#160;:</span></p></td>
<td> A quark representing the corresponding <span class="type">GError</span> domain
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>code_enum_type</code></em>&#160;:</span></p></td>
<td> The type of a subclass of <span class="type">GEnumClass</span>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2633064"></a><h3>
<a name="TpProxyInvokeFunc"></a>TpProxyInvokeFunc ()</h3>
<a class="indexterm" name="id2633078"></a><pre class="programlisting">void                (*TpProxyInvokeFunc)                (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GError *error,
                                                         GValueArray *args,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GObject *weak_object);</pre>
<p>
Signature of a callback invoked by the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> machinery after a D-Bus
method call has succeeded or failed. It is responsible for calling the
user-supplied callback.
</p>
<p>
Because parts of dbus-glib aren't reentrant, this callback may be called
from an idle handler shortly after the method call reply is received,
rather than from the callback for the reply.
</p>
<p>
At most one of <em class="parameter"><code>args</code></em> and <em class="parameter"><code>error</code></em> can be non-<code class="literal">NULL</code> (implementations may
assert this). <em class="parameter"><code>args</code></em> and <em class="parameter"><code>error</code></em> may both be <code class="literal">NULL</code> if a method with no
"out" arguments (i.e. a method that returns nothing) was called
successfully.
</p>
<p>
The <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc"><span class="type">TpProxyInvokeFunc</span></a> must call callback with <em class="parameter"><code>user_data</code></em>, <em class="parameter"><code>weak_object</code></em>,
and appropriate arguments derived from <em class="parameter"><code>error</code></em> and <em class="parameter"><code>args</code></em>. It is responsible
for freeing <em class="parameter"><code>error</code></em> and <em class="parameter"><code>args</code></em>, if their ownership has not been transferred.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> on which the D-Bus method was invoked
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> <code class="literal">NULL</code> if the method call succeeded, or a non-<code class="literal">NULL</code> error if the
 method call failed
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>args</code></em>&#160;:</span></p></td>
<td> array of "out" arguments (return values) for the D-Bus method,
 or <code class="literal">NULL</code> if an error occurred or if there were no "out" arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em>&#160;:</span></p></td>
<td> the callback that should be invoked, as passed to
 <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></p></td>
<td> user-supplied data to pass to the callback, as passed to
 <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em>&#160;:</span></p></td>
<td> user-supplied object to pass to the callback, as passed to
 <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2633426"></a><h3>
<a name="tp-proxy-pending-call-v0-new"></a>tp_proxy_pending_call_v0_new ()</h3>
<a class="indexterm" name="id2633441"></a><pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a>* tp_proxy_pending_call_v0_new        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         const gchar *member,
                                                         <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
>DBusGProxy</a> *iface_proxy,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc">TpProxyInvokeFunc</a> invoke_callback,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GDestroyNotify destroy,
                                                         GObject *weak_object,
                                                         gboolean cancel_must_raise);</pre>
<p>
Allocate a new pending call structure. After calling this function, the
caller must start an asynchronous D-Bus call and give the resulting
DBusGProxyCall to the pending call object using
<a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-take-pending-call"><code class="function">tp_proxy_pending_call_v0_take_pending_call()</code></a>.
</p>
<p>
If dbus-glib gets a reply to the call before it's cancelled, the caller
must arrange for <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-take-results"><code class="function">tp_proxy_pending_call_v0_take_results()</code></a> to be called
with the results (the intention is for this to be done immediately
after dbus_g_proxy_end_call in the callback supplied to dbus-glib).
</p>
<p>
When dbus-glib discards its reference to the user_data supplied in the
asynchronous D-Bus call (i.e. after the call is cancelled or a reply
arrives), tp_proxy_pending_call_v0_completed must be called (the intention
is for the <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> to be the <em class="parameter"><code>user_data</code></em> in the async call,
and for tp_proxy_pending_call_v0_completed to be the <span class="type">GDestroyNotify</span>
passed to the same async call).
</p>
<p>
This function is for use by <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations only, and
should usually only be called from code generated by
tools/glib-client-gen.py.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> a proxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>interface</code></em>&#160;:</span></p></td>
<td> a quark whose string value is the D-Bus interface
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>member</code></em>&#160;:</span></p></td>
<td> the name of the method being called
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>iface_proxy</code></em>&#160;:</span></p></td>
<td> the interface-specific <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#DBusGProxy"
><span class="type">DBusGProxy</span></a> for <em class="parameter"><code>interface</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>invoke_callback</code></em>&#160;:</span></p></td>
<td> an implementation of <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc"><span class="type">TpProxyInvokeFunc</span></a> which will
 invoke <em class="parameter"><code>callback</code></em> with appropriate arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em>&#160;:</span></p></td>
<td> a callback to be called when the call completes
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></p></td>
<td> user-supplied data for the callback
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em>&#160;:</span></p></td>
<td> user-supplied destructor for the data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em>&#160;:</span></p></td>
<td> if not <code class="literal">NULL</code>, a <span class="type">GObject</span> which will be weakly referenced by
  the signal connection - if it is destroyed, the pending call will
  automatically be cancelled
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cancel_must_raise</code></em>&#160;:</span></p></td>
<td> if <code class="literal">TRUE</code>, the <em class="parameter"><code>invoke_callback</code></em> will be run with
 error <a class="link" href="telepathy-glib-proxy.html#TP-DBUS-ERROR-CANCELLED:CAPS"><code class="literal">TP_DBUS_ERROR_CANCELLED</code></a> if the call is cancelled by a call to
 <a class="link" href="telepathy-glib-proxy.html#tp-proxy-pending-call-cancel"><code class="function">tp_proxy_pending_call_cancel()</code></a> or by destruction of the <code class="function">weak_object()</code>;
 if <code class="literal">FALSE</code>, the <em class="parameter"><code>invoke_callback</code></em> will not be run at all in these cases
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a new pending call structure

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2633884"></a><h3>
<a name="tp-proxy-pending-call-v0-completed"></a>tp_proxy_pending_call_v0_completed ()</h3>
<a class="indexterm" name="id2633900"></a><pre class="programlisting">void                tp_proxy_pending_call_v0_completed  (gpointer p);</pre>
<p>
Indicate that dbus-glib has finished with this pending call, and therefore
either <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-take-results"><code class="function">tp_proxy_pending_call_v0_take_results()</code></a> has already been called,
or it will never be called. See <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>.
</p>
<p>
The signature is chosen to match <span class="type">GDestroyNotify</span>.
</p>
<p>
This function is for use by <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations only, and
should usually only be called from code generated by
tools/glib-client-gen.py.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>p</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> allocated with <code class="function">tp_proxy_pending_call_new()</code>
</td>
</tr></tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2634020"></a><h3>
<a name="tp-proxy-pending-call-v0-take-pending-call"></a>tp_proxy_pending_call_v0_take_pending_call ()</h3>
<a class="indexterm" name="id2634036"></a><pre class="programlisting">void                tp_proxy_pending_call_v0_take_pending_call
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a> *pc,
                                                         DBusGProxyCall *pending_call);</pre>
<p>
Set the underlying pending call to be used by this object.
See also <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>.
</p>
<p>
This function is for use by <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations only, and
should usually only be called from code generated by
tools/glib-client-gen.py.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>pc</code></em>&#160;:</span></p></td>
<td> A pending call on which this function has not yet been called
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pending_call</code></em>&#160;:</span></p></td>
<td> The underlying dbus-glib pending call
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2634142"></a><h3>
<a name="tp-proxy-pending-call-v0-take-results"></a>tp_proxy_pending_call_v0_take_results ()</h3>
<a class="indexterm" name="id2634158"></a><pre class="programlisting">void                tp_proxy_pending_call_v0_take_results
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall">TpProxyPendingCall</a> *pc,
                                                         GError *error,
                                                         GValueArray *args);</pre>
<p>
Set the "out" arguments (return values) from this pending call.
See also <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-pending-call-v0-new"><code class="function">tp_proxy_pending_call_v0_new()</code></a>.
</p>
<p>
This function is for use by <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations only, and
should usually only be called from code generated by
tools/glib-client-gen.py.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>pc</code></em>&#160;:</span></p></td>
<td> A pending call on which this function has not yet been called
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> <code class="literal">NULL</code> if the call was successful, or an error (whose ownership
 is taken over by the pending call object). Because of dbus-glib
 idiosyncrasies, this must be the error produced by dbus-glib, not a copy.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>args</code></em>&#160;:</span></p></td>
<td> <code class="literal">NULL</code> if the call failed or had no "out" arguments, or an array
 of "out" arguments (whose ownership is taken over by the pending call
 object)
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2634768"></a><h3>
<a name="tp-proxy-signal-connection-v0-new"></a>tp_proxy_signal_connection_v0_new ()</h3>
<a class="indexterm" name="id2634785"></a><pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection">TpProxySignalConnection</a>* tp_proxy_signal_connection_v0_new
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a> *self,
                                                         GQuark interface,
                                                         const gchar *member,
                                                         const GType *expected_types,
                                                         GCallback collect_args,
                                                         <a class="link" href="telepathy-glib-proxy-subclass.html#TpProxyInvokeFunc">TpProxyInvokeFunc</a> invoke_callback,
                                                         GCallback callback,
                                                         gpointer user_data,
                                                         GDestroyNotify destroy,
                                                         GObject *weak_object,
                                                         GError **error);</pre>
<p>
Allocate a new structure representing a signal connection, and connect to
the signal, arranging for <em class="parameter"><code>invoke_callback</code></em> to be called when it arrives.
</p>
<p>
This function is for use by <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations only, and
should usually only be called from code generated by
tools/glib-client-gen.py.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em>&#160;:</span></p></td>
<td> a proxy
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>interface</code></em>&#160;:</span></p></td>
<td> a quark whose string value is the D-Bus interface
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>member</code></em>&#160;:</span></p></td>
<td> the name of the signal to which we're connecting
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>expected_types</code></em>&#160;:</span></p></td>
<td> an array of expected GTypes for the arguments, terminated
 by <code class="literal">G_TYPE_INVALID</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>collect_args</code></em>&#160;:</span></p></td>
<td> a callback to be given to <a
href="/usr/share/gtk-doc/html/dbus-glib/dbus-glib-DBusGProxy.html#dbus-g-proxy-connect-signal"
><code class="function">dbus_g_proxy_connect_signal()</code></a>,
 which must marshal the arguments into a <span class="type">GValueArray</span> and use them to call
 <a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-signal-connection-v0-take-results"><code class="function">tp_proxy_signal_connection_v0_take_results()</code></a>; this callback is not
 guaranteed to be called by future versions of telepathy-glib, which might
 be able to implement its functionality internally. If no arguments are
 expected at all (expected_types = { G_TYPE_INVALID }) then this callback
 should instead be <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>invoke_callback</code></em>&#160;:</span></p></td>
<td> a function which will be called with <em class="parameter"><code>error</code></em> = <code class="literal">NULL</code>,
 which should invoke <em class="parameter"><code>callback</code></em> with <em class="parameter"><code>user_data</code></em>, <em class="parameter"><code>weak_object</code></em> and other
 appropriate arguments taken from <em class="parameter"><code>args</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em>&#160;:</span></p></td>
<td> user callback to be invoked by <em class="parameter"><code>invoke_callback</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></p></td>
<td> user-supplied data for the callback
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em>&#160;:</span></p></td>
<td> user-supplied destructor for the data, which will be called
  when the signal connection is disconnected for any reason,
  or will be called before this function returns if an error occurs
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em>&#160;:</span></p></td>
<td> if not <code class="literal">NULL</code>, a <span class="type">GObject</span> which will be weakly referenced by
  the signal connection - if it is destroyed, the signal connection will
  automatically be disconnected
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is returned
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a signal connection structure, or <code class="literal">NULL</code> if the proxy does not
 have the desired interface or has become invalid

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2635239"></a><h3>
<a name="tp-proxy-signal-connection-v0-take-results"></a>tp_proxy_signal_connection_v0_take_results ()</h3>
<a class="indexterm" name="id2635256"></a><pre class="programlisting">void                tp_proxy_signal_connection_v0_take_results
                                                        (<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection">TpProxySignalConnection</a> *sc,
                                                         GValueArray *args);</pre>
<p>
Feed the results of a signal invocation back into the signal connection
machinery.
</p>
<p>
This method should only be called from <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> subclass implementations,
in the callback that implements <em class="parameter"><code>collect_args</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>sc</code></em>&#160;:</span></p></td>
<td> The signal connection
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>args</code></em>&#160;:</span></p></td>
<td> The arguments of the signal
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.7.1
</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2635355"></a><h2>See Also</h2>
<a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a>
</div>
<div class="refsect1" lang="en">
<a name="id2635369"></a><div class="refsect2" lang="en"><a name="id2635370"></a></div>
<hr>
<div class="refsect2" lang="en"><a name="id2635372"></a></div>
</div>
</div>
</body>
</html>
