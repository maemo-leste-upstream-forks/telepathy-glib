<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>TpDynamicHandleRepo</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="telepathy-glib Reference Manual">
<link rel="up" href="ch-service-handles.html" title="Service-side handle repositories">
<link rel="prev" href="TpStaticHandleRepo.html" title="TpStaticHandleRepo">
<link rel="next" href="ch-utilities.html" title="Utilities">
<meta name="generator" content="GTK-Doc V1.9 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch-dbus.html" title="General D-Bus support">
<link rel="chapter" href="ch-protocol.html" title="The Telepathy protocol">
<link rel="chapter" href="ch-client.html" title="Client-side proxies">
<link rel="chapter" href="ch-service-dbus.html" title="Service-side D-Bus interfaces">
<link rel="chapter" href="ch-service-base.html" title="Service-side implementation">
<link rel="chapter" href="ch-service-handles.html" title="Service-side handle repositories">
<link rel="chapter" href="ch-utilities.html" title="Utilities">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="TpStaticHandleRepo.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch-service-handles.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">telepathy-glib Reference Manual</th>
<td><a accesskey="n" href="ch-utilities.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2773056" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2831039" class="shortcut">Description</a>
                  &#160;|&#160;
                  <a href="#id2830953" class="shortcut">Object Hierarchy</a>
                  &#160;|&#160;
                  <a href="#id2830976" class="shortcut">Implemented Interfaces</a>
                  &#160;|&#160;
                  <a href="#id2830996" class="shortcut">Properties</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="TpDynamicHandleRepo"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2773056"></a><span class="refentrytitle">TpDynamicHandleRepo</span>
</h2>
<p>TpDynamicHandleRepo &#8212; general handle repository implementation, with dynamic
 handle allocation and recycling</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;telepathy-glib/handle-repo-dynamic.h&gt;


                    <a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepo-struct">TpDynamicHandleRepo</a>;
                    <a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepoClass">TpDynamicHandleRepoClass</a>;
<a class="link" href="telepathy-glib-handle.html#TpHandle">TpHandle</a>            <a class="link" href="TpDynamicHandleRepo.html#tp-dynamic-handle-repo-lookup-exact">tp_dynamic_handle_repo_lookup_exact</a> (<a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a> *irepo,
                                                         const char *id);
<a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a>*  <a class="link" href="TpDynamicHandleRepo.html#tp-dynamic-handle-repo-new">tp_dynamic_handle_repo_new</a>          (<a class="link" href="telepathy-glib-enums.html#TpHandleType">TpHandleType</a> handle_type,
                                                         <a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepoNormalizeFunc">TpDynamicHandleRepoNormalizeFunc</a> normalize_func,
                                                         gpointer default_normalize_context);
gchar*              (<a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepoNormalizeFunc">*TpDynamicHandleRepoNormalizeFunc</a>) (<a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a> *repo,
                                                         const gchar *id,
                                                         gpointer context,
                                                         GError **error);

</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2830953"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">

  GObject
   +----TpDynamicHandleRepo
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2830976"></a><h2>Implemented Interfaces</h2>
<p>
TpDynamicHandleRepo implements
 <a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a>.</p>
</div>
<div class="refsect1" lang="en">
<a name="id2830996"></a><h2>Properties</h2>
<pre class="synopsis">

  "<a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepo--default-normalize-context">default-normalize-context</a>" gpointer              : Read / Write / Construct Only
  "<a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepo--normalize-function">normalize-function</a>"       gpointer              : Read / Write / Construct Only
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2831039"></a><h2>Description</h2>
<p>
A dynamic handle repository will accept arbitrary handles, which can
be created and destroyed at runtime.
</p>
<p>
The <span class="type">"handle-type"</span> property must be set at construction
time; the <a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepo--normalize-function"><span class="type">"normalize-function"</span></a> property may be set to
perform validation and normalization on handle ID strings.
</p>
<p>
Most connection managers will use this for all supported handle types
except <code class="literal">TP_HANDLE_TYPE_CONTACT_LIST</code>.</p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2847278"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2847288"></a><h3>
<a name="TpDynamicHandleRepo-struct"></a>TpDynamicHandleRepo</h3>
<a class="indexterm" name="id2847300"></a><pre class="programlisting">typedef struct _TpDynamicHandleRepo TpDynamicHandleRepo;</pre>
<p>
A dynamic handle repository. The contents of the struct are private.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2847320"></a><h3>
<a name="TpDynamicHandleRepoClass"></a>TpDynamicHandleRepoClass</h3>
<a class="indexterm" name="id2847331"></a><pre class="programlisting">typedef struct _TpDynamicHandleRepoClass TpDynamicHandleRepoClass;</pre>
<p>
The class of a dynamic handle repository. The contents of the struct
are private.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2847352"></a><h3>
<a name="tp-dynamic-handle-repo-lookup-exact"></a>tp_dynamic_handle_repo_lookup_exact ()</h3>
<a class="indexterm" name="id2847363"></a><pre class="programlisting"><a class="link" href="telepathy-glib-handle.html#TpHandle">TpHandle</a>            tp_dynamic_handle_repo_lookup_exact (<a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a> *irepo,
                                                         const char *id);</pre>
<p>
Look up a name in the repository, returning the corresponding handle if
it is present in the repository, without creating a new reference.
</p>
<p>
Unlike <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-lookup"><code class="function">tp_handle_lookup()</code></a> this function does not perform any normalization;
it just looks for the literal string you requested. This can be useful to
call from normalization callbacks (for instance, Gabble's contacts
repository uses it to see whether we already know that a JID belongs
to a multi-user chat room member).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>irepo</code></em>&#160;:</span></p></td>
<td> The handle repository
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>id</code></em>&#160;:</span></p></td>
<td> The name to be looked up
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the handle corresponding to the given ID, or 0 if not present
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2847863"></a><h3>
<a name="tp-dynamic-handle-repo-new"></a>tp_dynamic_handle_repo_new ()</h3>
<a class="indexterm" name="id2847875"></a><pre class="programlisting"><a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a>*  tp_dynamic_handle_repo_new          (<a class="link" href="telepathy-glib-enums.html#TpHandleType">TpHandleType</a> handle_type,
                                                         <a class="link" href="TpDynamicHandleRepo.html#TpDynamicHandleRepoNormalizeFunc">TpDynamicHandleRepoNormalizeFunc</a> normalize_func,
                                                         gpointer default_normalize_context);</pre>
<p>
</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>handle_type</code></em>&#160;:</span></p></td>
<td> The handle type
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>normalize_func</code></em>&#160;:</span></p></td>
<td> The function to be used to normalize and validate handles,
 or <code class="literal">NULL</code> to accept all handles as-is
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>default_normalize_context</code></em>&#160;:</span></p></td>
<td> The context pointer to be passed to the
 <em class="parameter"><code>normalize_func</code></em> if a <code class="literal">NULL</code> context is passed to <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-lookup"><code class="function">tp_handle_lookup()</code></a> and
 <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-ensure"><code class="function">tp_handle_ensure()</code></a>; this may itself be <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a new dynamic handle repository
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2848498"></a><h3>
<a name="TpDynamicHandleRepoNormalizeFunc"></a>TpDynamicHandleRepoNormalizeFunc ()</h3>
<a class="indexterm" name="id2848509"></a><pre class="programlisting">gchar*              (*TpDynamicHandleRepoNormalizeFunc) (<a class="link" href="telepathy-glib-handle-repo.html#TpHandleRepoIface">TpHandleRepoIface</a> *repo,
                                                         const gchar *id,
                                                         gpointer context,
                                                         GError **error);</pre>
<p>
Signature of the normalization function optionally used by
<a class="link" href="TpDynamicHandleRepo.html" title="TpDynamicHandleRepo"><span class="type">TpDynamicHandleRepo</span></a> instances.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>repo</code></em>&#160;:</span></p></td>
<td> The repository on which <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-lookup"><code class="function">tp_handle_lookup()</code></a> or <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-ensure"><code class="function">tp_handle_ensure()</code></a>
       was called
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>id</code></em>&#160;:</span></p></td>
<td> The name to be normalized
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em>&#160;:</span></p></td>
<td> Arbitrary context passed to <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-lookup"><code class="function">tp_handle_lookup()</code></a> or
          <a class="link" href="telepathy-glib-handle-repo.html#tp-handle-ensure"><code class="function">tp_handle_ensure()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td> Used to raise the Telepathy error InvalidHandle with an appropriate
        message if NULL is returned
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a normalized version of <em class="parameter"><code>id</code></em> (to be freed with g_free by the
         caller), or NULL if <em class="parameter"><code>id</code></em> is not valid for this repository
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2848688"></a><h2>Property Details</h2>
<div class="refsect2" lang="en">
<a name="id2848698"></a><h3>
<a name="TpDynamicHandleRepo--default-normalize-context"></a>The <code class="literal">"default-normalize-context"</code> property</h3>
<a class="indexterm" name="id2848714"></a><pre class="programlisting">  "default-normalize-context" gpointer              : Read / Write / Construct Only</pre>
<p>The default context given to the normalize-function if NULL is passed as context to the ensure or lookup function, e.g. when RequestHandleis called via D-Bus. The default is NULL.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2848739"></a><h3>
<a name="TpDynamicHandleRepo--normalize-function"></a>The <code class="literal">"normalize-function"</code> property</h3>
<a class="indexterm" name="id2848752"></a><pre class="programlisting">  "normalize-function"       gpointer              : Read / Write / Construct Only</pre>
<p>A TpDynamicHandleRepoNormalizeFunc used to normalize handle IDs.</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2853927"></a><h2>See Also</h2>
TpHandleRepoIface, TpStaticHandleRepo
</div>
<div class="refsect1" lang="en">
<a name="id2853934"></a><div class="refsect2" lang="en"><a name="id2853935"></a></div>
<hr>
<div class="refsect2" lang="en"><a name="id2853936"></a></div>
</div>
</div>
</body>
</html>
