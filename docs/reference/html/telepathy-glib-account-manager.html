<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TpAccountManager</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="telepathy-glib API Reference Manual">
<link rel="up" href="ch-client.html" title="Client-side proxies">
<link rel="prev" href="telepathy-glib-media-interfaces.html" title="TpMediaSessionHandler, TpMediaStreamHandler">
<link rel="next" href="telepathy-glib-account.html" title="TpAccount">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="telepathy-glib-media-interfaces.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch-client.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">telepathy-glib API Reference Manual</th>
<td><a accesskey="n" href="telepathy-glib-account.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#telepathy-glib-account-manager.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#telepathy-glib-account-manager.description" class="shortcut">Description</a>
                   | 
                  <a href="#telepathy-glib-account-manager.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="#telepathy-glib-account-manager.signals" class="shortcut">Signals</a>
</td></tr>
</table>
<div class="refentry">
<a name="telepathy-glib-account-manager"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="telepathy-glib-account-manager.top_of_page"></a>TpAccountManager</span></h2>
<p>TpAccountManager — proxy object for the Telepathy account manager</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="telepathy-glib-account-manager.synopsis"></a><h2>Synopsis</h2>
<a name="TpAccountManager"></a><pre class="synopsis">
#include &lt;telepathy-glib/telepathy-glib.h&gt;

struct              <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-struct" title="struct TpAccountManager">TpAccountManager</a>;
struct              <a class="link" href="telepathy-glib-account-manager.html#TpAccountManagerClass" title="struct TpAccountManagerClass">TpAccountManagerClass</a>;
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new" title="tp_account_manager_new ()">tp_account_manager_new</a>              (<em class="parameter"><code><a class="link" href="telepathy-glib-dbus.html#TpDBusDaemon"><span class="type">TpDBusDaemon</span></a> *bus_daemon</code></em>);
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new-with-factory" title="tp_account_manager_new_with_factory ()">tp_account_manager_new_with_factory</a> (<em class="parameter"><code><a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a> *factory</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-init-known-interfaces" title="tp_account_manager_init_known_interfaces ()">tp_account_manager_init_known_interfaces</a>
                                                        (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()">tp_account_manager_set_default</a>      (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);
<span class="returnvalue">gboolean</span>            <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-can-set-default" title="tp_account_manager_can_set_default ()">tp_account_manager_can_set_default</a>  (<em class="parameter"><code><span class="type">void</span></code></em>);
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()">tp_account_manager_dup</a>              (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-async" title="tp_account_manager_create_account_async ()">tp_account_manager_create_account_async</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *connection_manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *protocol</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *display_name</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *parameters</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *properties</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *         <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()">tp_account_manager_create_account_finish</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *         <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-ensure-account" title="tp_account_manager_ensure_account ()">tp_account_manager_ensure_account</a>   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);
<span class="returnvalue">GList</span> *             <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-valid-accounts" title="tp_account_manager_get_valid_accounts ()">tp_account_manager_get_valid_accounts</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);
<span class="returnvalue">GList</span> *             <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()">tp_account_manager_dup_valid_accounts</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);
<a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a> <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-most-available-presence" title="tp_account_manager_get_most_available_presence ()">tp_account_manager_get_most_available_presence</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">gchar</span> **status</code></em>,
                                                         <em class="parameter"><code><span class="type">gchar</span> **message</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-all-requested-presences" title="tp_account_manager_set_all_requested_presences ()">tp_account_manager_set_all_requested_presences</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a> type</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *status</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *message</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-enable-restart" title="tp_account_manager_enable_restart ()">tp_account_manager_enable_restart</a>   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);

#define             <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE">TP_ACCOUNT_MANAGER_FEATURE_CORE</a>
<span class="returnvalue">gboolean</span>            <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-is-prepared" title="tp_account_manager_is_prepared ()">tp_account_manager_is_prepared</a>      (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GQuark</span> feature</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-async" title="tp_account_manager_prepare_async ()">tp_account_manager_prepare_async</a>    (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">GQuark</span> *features</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);
<span class="returnvalue">gboolean</span>            <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-finish" title="tp_account_manager_prepare_finish ()">tp_account_manager_prepare_finish</a>   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);


<span class="returnvalue">void</span>                (<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-callback-for-create-account" title="tp_cli_account_manager_callback_for_create_account ()">*tp_cli_account_manager_callback_for_create_account</a>)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *out_Account</code></em>,
                                                         <em class="parameter"><code>const <span class="type">GError</span> *error</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);
<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="returnvalue">TpProxyPendingCall</span></a> * <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-call-create-account" title="tp_cli_account_manager_call_create_account ()">tp_cli_account_manager_call_create_account</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><span class="type">gint</span> timeout_ms</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Connection_Manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Protocol</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Display_Name</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *in_Parameters</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *in_Properties</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-callback-for-create-account" title="tp_cli_account_manager_callback_for_create_account ()"><span class="type">tp_cli_account_manager_callback_for_create_account</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);
<span class="returnvalue">void</span>                (<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-removed" title="tp_cli_account_manager_signal_callback_account_removed ()">*tp_cli_account_manager_signal_callback_account_removed</a>)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> * <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-removed" title="tp_cli_account_manager_connect_to_account_removed ()">tp_cli_account_manager_connect_to_account_removed</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-removed" title="tp_cli_account_manager_signal_callback_account_removed ()"><span class="type">tp_cli_account_manager_signal_callback_account_removed</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);
<span class="returnvalue">void</span>                (<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-validity-changed" title="tp_cli_account_manager_signal_callback_account_validity_changed ()">*tp_cli_account_manager_signal_callback_account_validity_changed</a>)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> arg_Valid</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> * <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-validity-changed" title="tp_cli_account_manager_connect_to_account_validity_changed ()">tp_cli_account_manager_connect_to_account_validity_changed</a>
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-validity-changed" title="tp_cli_account_manager_signal_callback_account_validity_changed ()"><span class="type">tp_cli_account_manager_signal_callback_account_validity_changed</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  GObject
   +----<a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a>
         +----TpAccountManager
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.signals"></a><h2>Signals</h2>
<pre class="synopsis">
  "<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-disabled" title='The "account-disabled" signal'>account-disabled</a>"                               : <code class="literal">Run Last</code>
  "<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-enabled" title='The "account-enabled" signal'>account-enabled</a>"                                : <code class="literal">Run Last</code>
  "<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-removed" title='The "account-removed" signal'>account-removed</a>"                                : <code class="literal">Run Last</code>
  "<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-validity-changed" title='The "account-validity-changed" signal'>account-validity-changed</a>"                       : <code class="literal">Run Last</code>
  "<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-most-available-presence-changed" title='The "most-available-presence-changed" signal'>most-available-presence-changed</a>"                : <code class="literal">Run Last</code>
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.description"></a><h2>Description</h2>
<p>
The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object is used to communicate with the Telepathy
AccountManager service.
</p>
<p>
A new <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object can be created with
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>.
</p>
<p>
To list the existing valid accounts, the client should first
prepare the <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> feature using
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a>, then call
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a>.
</p>
<p>
The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-validity-changed" title='The "account-validity-changed" signal'><span class="type">"account-validity-changed"</span></a> signal is emitted
to notify of the validity of an account changing. New accounts are
also indicated by the emission of this signal on an account that
did not previously exist. (The rationale behind indicating new
accounts by an account validity change signal is that clients
interested in this kind of thing should be connected to this signal
anyway: an account having just become valid is effectively a new
account to a client.)
</p>
<p>
The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-removed" title='The "account-removed" signal'><span class="type">"account-removed"</span></a> signal is emitted when
existing accounts are removed.
</p>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="TpAccountManager-struct"></a><h3>struct TpAccountManager</h3>
<pre class="programlisting">struct TpAccountManager;</pre>
<p>
The Telepathy Account Manager stores real-time communication accounts and
their configuration, places accounts online on request, and manipulates
accounts' presence, nicknames and avatars.
</p>
<p>
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is the "top level" object, its <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title='The "factory" property'><span class="type">"factory"</span></a> will be
propagated to all other objects like <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> -&gt; <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> -&gt;
<a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> -&gt; <a class="link" href="telepathy-glib-contact.html#TpContact"><span class="type">TpContact</span></a> and <a class="link" href="telepathy-glib-channel.html#TpChannel"><span class="type">TpChannel</span></a>. This means that desired features
set on that factory will be prepared on all those objects.
</p>
<p>
</p>
<div class="example">
<a name="account-manager"></a><p class="title"><b>Example 2. TpAccountManager example</b></p>
<div class="example-contents">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="comment">/*</span>
<span class="comment"> * contact-list</span>
<span class="comment"> *</span>
<span class="comment"> * Copyright © 2011 Collabora Ltd. </span><span class="url"><a href="&lt;http://www.collabora.co.uk/&gt;">&lt;http://www.collabora.co.uk/&gt;</a></span>
<span class="comment"> *</span>
<span class="comment"> * Copying and distribution of this file, with or without modification,</span>
<span class="comment"> * are permitted in any medium without royalty provided the copyright</span>
<span class="comment"> * notice and this notice are preserved.</span>
<span class="comment"> */</span>

<span class="preproc">#include</span><span class="normal"> </span><span class="string">"config.h"</span>

<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;telepathy-glib/telepathy-glib.h&gt;</span>

<span class="keyword">static</span><span class="normal"> </span><span class="type">void</span>
<span class="function">account_manager_prepared_cb</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">GObject</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">object</span><span class="symbol">,</span>
<span class="normal">    </span><span class="usertype">GAsyncResult</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">res</span><span class="symbol">,</span>
<span class="normal">    </span><span class="usertype">gpointer</span><span class="normal"> user_data</span><span class="symbol">)</span>
<span class="cbracket">{</span>
<span class="normal">  </span><span class="usertype">TpAccountManager</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">manager </span><span class="symbol">=</span><span class="normal"> </span><span class="symbol">(</span><span class="normal"><a href="telepathy-glib-account-manager.html#TpAccountManager">TpAccountManager</a> </span><span class="symbol">*)</span><span class="normal"> object</span><span class="symbol">;</span>
<span class="normal">  </span><span class="usertype">GMainLoop</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">loop </span><span class="symbol">=</span><span class="normal"> user_data</span><span class="symbol">;</span>
<span class="normal">  </span><span class="usertype">GList</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">accounts</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">l</span><span class="symbol">;</span>
<span class="normal">  </span><span class="usertype">GError</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">error </span><span class="symbol">=</span><span class="normal"> NULL</span><span class="symbol">;</span>

<span class="normal">  </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="function"><a href="telepathy-glib-proxy.html#tp-proxy-prepare-finish">tp_proxy_prepare_finish</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">object</span><span class="symbol">,</span><span class="normal"> res</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">&amp;</span><span class="normal">error</span><span class="symbol">))</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">      </span><span class="function">g_print</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"Error preparing AM: %s</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">,</span><span class="normal"> error</span><span class="symbol">-&gt;</span><span class="normal">message</span><span class="symbol">);</span>
<span class="normal">      </span><span class="keyword">goto</span><span class="normal"> OUT</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">  accounts </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts">tp_account_manager_dup_valid_accounts</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">manager</span><span class="symbol">);</span>
<span class="normal">  </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">l </span><span class="symbol">=</span><span class="normal"> accounts</span><span class="symbol">;</span><span class="normal"> l </span><span class="symbol">!=</span><span class="normal"> NULL</span><span class="symbol">;</span><span class="normal"> l </span><span class="symbol">=</span><span class="normal"> l</span><span class="symbol">-&gt;</span><span class="normal">next</span><span class="symbol">)</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">      </span><span class="usertype">TpAccount</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">account </span><span class="symbol">=</span><span class="normal"> accounts</span><span class="symbol">-&gt;</span><span class="normal">data</span><span class="symbol">;</span>
<span class="normal">      </span><span class="usertype">TpConnection</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">connection </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-account.html#tp-account-get-connection">tp_account_get_connection</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">account</span><span class="symbol">);</span>
<span class="normal">      </span><span class="usertype">GPtrArray</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">contacts</span><span class="symbol">;</span>
<span class="normal">      </span><span class="usertype">guint</span><span class="normal"> i</span><span class="symbol">;</span>

<span class="normal">      </span><span class="comment">/* Verify account is online and received its contact list. If state is not</span>
<span class="comment">       * SUCCESS this means we didn't received the roster from server yet and</span>
<span class="comment">       * we would have to wait for the "notify:contact-list-state" signal. */</span>
<span class="normal">      </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">connection </span><span class="symbol">==</span><span class="normal"> NULL </span><span class="symbol">||</span>
<span class="normal">          </span><span class="function"><a href="telepathy-glib-connection.html#tp-connection-get-contact-list-state">tp_connection_get_contact_list_state</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">connection</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">!=</span>
<span class="normal">              <a href="telepathy-glib-enums.html#TP-CONTACT-LIST-STATE-SUCCESS:CAPS">TP_CONTACT_LIST_STATE_SUCCESS</a></span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">continue</span><span class="symbol">;</span>

<span class="normal">      contacts </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-connection.html#tp-connection-dup-contact-list">tp_connection_dup_contact_list</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">connection</span><span class="symbol">);</span>
<span class="normal">      </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> contacts</span><span class="symbol">-&gt;</span><span class="normal">len</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span>
<span class="normal">        </span><span class="cbracket">{</span>
<span class="normal">          </span><span class="usertype">TpContact</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">contact </span><span class="symbol">=</span><span class="normal"> </span><span class="function">g_ptr_array_index</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">contacts</span><span class="symbol">,</span><span class="normal"> i</span><span class="symbol">);</span>
<span class="normal">          </span><span class="keyword">const</span><span class="normal"> gchar </span><span class="symbol">*</span><span class="normal"> </span><span class="keyword">const</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">groups</span><span class="symbol">;</span>

<span class="normal">          </span><span class="function">g_print</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"contact %s (%s) in groups:</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">,</span>
<span class="normal">              </span><span class="function"><a href="telepathy-glib-contact.html#tp-contact-get-identifier">tp_contact_get_identifier</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">contact</span><span class="symbol">),</span>
<span class="normal">              </span><span class="function"><a href="telepathy-glib-contact.html#tp-contact-get-alias">tp_contact_get_alias</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">contact</span><span class="symbol">));</span>

<span class="normal">          </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">groups </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-contact.html#tp-contact-get-contact-groups">tp_contact_get_contact_groups</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">contact</span><span class="symbol">);</span>
<span class="normal">               </span><span class="symbol">*</span><span class="normal">groups </span><span class="symbol">!=</span><span class="normal"> NULL</span><span class="symbol">;</span><span class="normal"> groups</span><span class="symbol">++)</span>
<span class="normal">            </span><span class="function">g_print</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"  %s</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">groups</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">      </span><span class="function">g_ptr_array_unref</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">contacts</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>
<span class="normal">  </span><span class="function">g_list_free_full</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">accounts</span><span class="symbol">,</span><span class="normal"> g_object_unref</span><span class="symbol">);</span>

<span class="label">OUT:</span>
<span class="normal">  </span><span class="function">g_main_loop_quit</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">loop</span><span class="symbol">);</span>
<span class="cbracket">}</span>

<span class="type">int</span>
<span class="function">main</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> argc</span><span class="symbol">,</span>
<span class="normal">      </span><span class="type">char</span><span class="normal"> </span><span class="symbol">**</span><span class="normal">argv</span><span class="symbol">)</span>
<span class="cbracket">{</span>
<span class="normal">  </span><span class="usertype">TpAccountManager</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">manager</span><span class="symbol">;</span>
<span class="normal">  </span><span class="usertype">TpSimpleClientFactory</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">factory</span><span class="symbol">;</span>
<span class="normal">  </span><span class="usertype">GMainLoop</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">loop</span><span class="symbol">;</span>

<span class="normal">  </span><span class="function">g_type_init</span><span class="normal"> </span><span class="symbol">();</span>
<span class="normal">  </span><span class="function"><a href="telepathy-glib-debug.html#tp-debug-set-flags">tp_debug_set_flags</a></span><span class="normal"> </span><span class="symbol">(</span><span class="function">g_getenv</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"EXAMPLE_DEBUG"</span><span class="symbol">));</span>

<span class="normal">  loop </span><span class="symbol">=</span><span class="normal"> </span><span class="function">g_main_loop_new</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">NULL</span><span class="symbol">,</span><span class="normal"> FALSE</span><span class="symbol">);</span>

<span class="normal">  manager </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-account-manager.html#tp-account-manager-dup">tp_account_manager_dup</a></span><span class="normal"> </span><span class="symbol">();</span>
<span class="normal">  factory </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-proxy.html#tp-proxy-get-factory">tp_proxy_get_factory</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">manager</span><span class="symbol">);</span>
<span class="normal">  </span><span class="function"><a href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features-varargs">tp_simple_client_factory_add_account_features_varargs</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">factory</span><span class="symbol">,</span>
<span class="normal">      <a href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CONNECTION:CAPS">TP_ACCOUNT_FEATURE_CONNECTION</a></span><span class="symbol">,</span>
<span class="normal">      </span><span class="number">0</span><span class="symbol">);</span>
<span class="normal">  </span><span class="function"><a href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-connection-features-varargs">tp_simple_client_factory_add_connection_features_varargs</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">factory</span><span class="symbol">,</span>
<span class="normal">      <a href="telepathy-glib-connection.html#TP-CONNECTION-FEATURE-CONTACT-LIST:CAPS">TP_CONNECTION_FEATURE_CONTACT_LIST</a></span><span class="symbol">,</span>
<span class="normal">      </span><span class="number">0</span><span class="symbol">);</span>
<span class="normal">  </span><span class="function"><a href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-contact-features-varargs">tp_simple_client_factory_add_contact_features_varargs</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">factory</span><span class="symbol">,</span>
<span class="normal">      <a href="telepathy-glib-contact.html#TP-CONTACT-FEATURE-ALIAS:CAPS">TP_CONTACT_FEATURE_ALIAS</a></span><span class="symbol">,</span>
<span class="normal">      <a href="telepathy-glib-contact.html#TP-CONTACT-FEATURE-CONTACT-GROUPS:CAPS">TP_CONTACT_FEATURE_CONTACT_GROUPS</a></span><span class="symbol">,</span>
<span class="normal">      <a href="telepathy-glib-contact.html#TP-CONTACT-FEATURE-INVALID:CAPS">TP_CONTACT_FEATURE_INVALID</a></span><span class="symbol">);</span>

<span class="normal">  </span><span class="function"><a href="telepathy-glib-proxy.html#tp-proxy-prepare-async">tp_proxy_prepare_async</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">manager</span><span class="symbol">,</span><span class="normal"> NULL</span><span class="symbol">,</span><span class="normal"> account_manager_prepared_cb</span><span class="symbol">,</span><span class="normal"> loop</span><span class="symbol">);</span>

<span class="normal">  </span><span class="function">g_main_loop_run</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">loop</span><span class="symbol">);</span>

<span class="normal">  </span><span class="function">g_object_unref</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">manager</span><span class="symbol">);</span>
<span class="normal">  </span><span class="function">g_main_loop_unref</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">loop</span><span class="symbol">);</span>

<span class="normal">  </span><span class="keyword">return</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span>
<span class="cbracket">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

</div>
<p><br class="example-break">
</p>
<p class="since">Since 0.7.32</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManagerClass"></a><h3>struct TpAccountManagerClass</h3>
<pre class="programlisting">struct TpAccountManagerClass {
};
</pre>
<p>
The class of a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>.
</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-new"></a><h3>tp_account_manager_new ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  tp_account_manager_new              (<em class="parameter"><code><a class="link" href="telepathy-glib-dbus.html#TpDBusDaemon"><span class="type">TpDBusDaemon</span></a> *bus_daemon</code></em>);</pre>
<p>
Convenience function to create a new account manager proxy. The returned
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed to be ready on return.
</p>
<p>
Use <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a> instead if you want an account manager proxy
on the starter or session bus (which is almost always the right thing for
Telepathy).
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>bus_daemon</code></em> :</span></p></td>
<td>Proxy for the D-Bus daemon</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new reference to an account manager proxy</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-new-with-factory"></a><h3>tp_account_manager_new_with_factory ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  tp_account_manager_new_with_factory (<em class="parameter"><code><a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a> *factory</code></em>);</pre>
<p>
Convenience function to create a new account manager proxy. The returned
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed to be ready on return.
</p>
<p>
Should be used only by applications having their own <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a>
subclass. Usually this should be done at application startup and followed by
a call to <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> to ensure other libraries/plugins
will use this custom factory as well.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>factory</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new reference to an account manager proxy</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-init-known-interfaces"></a><h3>tp_account_manager_init_known_interfaces ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_init_known_interfaces
                                                        (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
Ensure that the known interfaces for TpAccountManager have been set up.
This is done automatically when necessary, but for correct
overriding of library interfaces by local extensions, you should
call this function before calling
<a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-or-subclass-hook-on-interface-add" title="tp_proxy_or_subclass_hook_on_interface_add ()"><code class="function">tp_proxy_or_subclass_hook_on_interface_add()</code></a> with first argument
<code class="literal">TP_TYPE_ACCOUNT_MANAGER</code>.
</p>
<p class="since">Since 0.7.32</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-set-default"></a><h3>tp_account_manager_set_default ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_set_default      (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>
Define the <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> singleton that will be returned by
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>.
</p>
<p>
This function may only be called before the first call to
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>, and may not be called more than once. Applications
which use a custom <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a> and want the default
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> to use that factory should call this after calling
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new-with-factory" title="tp_account_manager_new_with_factory ()"><code class="function">tp_account_manager_new_with_factory()</code></a>.
</p>
<p>
Unlike <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>, this function will keep an internal
reference to <em class="parameter"><code>manager</code></em>, so it will never be destroyed.
</p>
<p>
Note that <em class="parameter"><code>manager</code></em> must use the default <a class="link" href="telepathy-glib-dbus.html#TpDBusDaemon"><span class="type">TpDBusDaemon</span></a> as returned by
<a class="link" href="telepathy-glib-dbus.html#tp-dbus-daemon-dup" title="tp_dbus_daemon_dup ()"><code class="function">tp_dbus_daemon_dup()</code></a>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr></tbody>
</table></div>
<p class="since">Since 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-can-set-default"></a><h3>tp_account_manager_can_set_default ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>            tp_account_manager_can_set_default  (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
Check if <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> has already successfully been
called.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>
<code class="literal">TRUE</code> if <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> has already successfully
been called in this process, <code class="literal">FALSE</code> otherwise.</td>
</tr></tbody>
</table></div>
<p class="since">Since 0.19.6</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-dup"></a><h3>tp_account_manager_dup ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *  tp_account_manager_dup              (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
Returns an account manager proxy on the D-Bus daemon on which this
process was activated (if it was launched by D-Bus service activation), or
the session bus (otherwise).
</p>
<p>
The returned <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is cached; the same <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object
will be returned by this function repeatedly, as long as at least one
reference exists. Note that the returned <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed
to be ready on return.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>an account manager proxy on the starter or session
bus, or <code class="literal">NULL</code> if it wasn't possible to get a dbus daemon proxy for
the appropriate bus. <span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span>
</td>
</tr></tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-create-account-async"></a><h3>tp_account_manager_create_account_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_create_account_async
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *connection_manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *protocol</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *display_name</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *parameters</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *properties</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>
Requests an asynchronous create of an account on the account manager
<em class="parameter"><code>manager</code></em>. When the operation is finished, <em class="parameter"><code>callback</code></em> will be called. You can
then call <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()"><code class="function">tp_account_manager_create_account_finish()</code></a> to get the result of
the operation.
</p>
<p>
<em class="parameter"><code>callback</code></em> will only be called when the newly created <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> has the
<a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> feature ready on it, so when calling
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()"><code class="function">tp_account_manager_create_account_finish()</code></a>, one can guarantee this feature
will be ready.
</p>
<p>
It is usually better to use <a class="link" href="telepathy-glib-account-request.html#TpAccountRequest"><span class="type">TpAccountRequest</span></a> instead, particularly when
using high-level language bindings.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>connection_manager</code></em> :</span></p></td>
<td>the name of a connection manager</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>protocol</code></em> :</span></p></td>
<td>the name of a protocol</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>display_name</code></em> :</span></p></td>
<td>the display name for the account</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>parameters</code></em> :</span></p></td>
<td>parameters
for the new account. <span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GObject.Value][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>properties</code></em> :</span></p></td>
<td>properties
for the new account. <span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GObject.Value][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td>a callback to call when the request is satisfied</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>data to pass to <em class="parameter"><code>callback</code></em>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-create-account-finish"></a><h3>tp_account_manager_create_account_finish ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *         tp_account_manager_create_account_finish
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>
Finishes an async create account operation, and returns a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
object, with the <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> feature ready on it.
</p>
<p>
The caller must keep a ref to the returned object using <code class="function">g_object_ref()</code> if
it is to be kept beyond the lifetime of <em class="parameter"><code>result</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>result</code></em> :</span></p></td>
<td>a <span class="type">GAsyncResult</span>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>a <span class="type">GError</span> to be filled</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> which was just created on
success, otherwise <code class="literal">NULL</code>. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-ensure-account"></a><h3>tp_account_manager_ensure_account ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *         tp_account_manager_ensure_account   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">tp_account_manager_ensure_account</code> is deprecated and should not be used in newly-written code. New code should use <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-ensure-account" title="tp_simple_client_factory_ensure_account ()"><code class="function">tp_simple_client_factory_ensure_account()</code></a>
 instead.</p>
</div>
<p>
Lookup an account in the account manager <em class="parameter"><code>manager</code></em>. If the desired account
has already been ensured then the same object will be returned, otherwise
it will create a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> and add it to <em class="parameter"><code>manager</code></em>. As a result, if
<em class="parameter"><code>manager</code></em> thinks that the account doesn't exist, this will still add it to
<em class="parameter"><code>manager</code></em> to avoid races. Note that the returned <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> is not guaranteed
to be ready on return.
</p>
<p>
The caller must keep a ref to the returned object using <code class="function">g_object_ref()</code> if
it is to be kept.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>path</code></em> :</span></p></td>
<td>the object path for an account</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> at <em class="parameter"><code>path</code></em>, or <code class="literal">NULL</code> if <em class="parameter"><code>path</code></em> is
not a valid account path. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-get-valid-accounts"></a><h3>tp_account_manager_get_valid_accounts ()</h3>
<pre class="programlisting"><span class="returnvalue">GList</span> *             tp_account_manager_get_valid_accounts
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">tp_account_manager_get_valid_accounts</code> is deprecated and should not be used in newly-written code. Since 0.19.9. New code should use
 <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a> instead.</p>
</div>
<p>
Returns a newly allocated <span class="type">GList</span> of valid accounts in <em class="parameter"><code>manager</code></em>. The list
must be freed with <code class="function">g_list_free()</code> after used. None of the accounts in the
returned list are guaranteed to be ready.
</p>
<p>
Note that the <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s in the returned <span class="type">GList</span> are not reffed
before returning from this function. One could ref every item in the list
like the following example:
</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="usertype">GList</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">accounts</span><span class="symbol">;</span>
<span class="normal">account </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="telepathy-glib-account-manager.html#tp-account-manager-get-valid-accounts">tp_account_manager_get_valid_accounts</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">manager</span><span class="symbol">);</span>
<span class="function">g_list_foreach</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">accounts</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">GFunc</span><span class="symbol">)</span><span class="normal"> g_object_ref</span><span class="symbol">,</span><span class="normal"> NULL</span><span class="symbol">);</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>
</p>
<p>
The returned <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s are guaranteed to have
<a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all features previously passed
to <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.
</p>
<p>
The list of valid accounts returned is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> is prepared
(<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has returned). Until this feature has
been prepared, an empty list (<code class="literal">NULL</code>) will be returned.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a newly allocated <span class="type">GList</span> of valid accounts in <em class="parameter"><code>manager</code></em>. <span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> TelepathyGLib.Account][<acronym title="Free data container after the code is done."><span class="acronym">transfer container</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-dup-valid-accounts"></a><h3>tp_account_manager_dup_valid_accounts ()</h3>
<pre class="programlisting"><span class="returnvalue">GList</span> *             tp_account_manager_dup_valid_accounts
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>
Returns a newly allocated <span class="type">GList</span> of reffed valid accounts in <em class="parameter"><code>manager</code></em>.
The list must be freed with <code class="function">g_list_free_full()</code> and <code class="function">g_object_unref()</code> after
used.
</p>
<p>
The returned <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s are guaranteed to have
<a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all features previously passed
to <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.
</p>
<p>
The list of valid accounts returned is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> is prepared
(<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has returned). Until this feature has
been prepared, an empty list (<code class="literal">NULL</code>) will be returned.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a newly
allocated <span class="type">GList</span> of reffed valid accounts in <em class="parameter"><code>manager</code></em>. <span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> TelepathyGLib.Account][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.19.9</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-get-most-available-presence"></a><h3>tp_account_manager_get_most_available_presence ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a> tp_account_manager_get_most_available_presence
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">gchar</span> **status</code></em>,
                                                         <em class="parameter"><code><span class="type">gchar</span> **message</code></em>);</pre>
<p>
Gets the most available presence over all accounts in <em class="parameter"><code>manager</code></em>. This
function does not average presences across all accounts, but it merely
finds the "most available" presence. As a result, there is a guarantee
that there exists at least one account in <em class="parameter"><code>manager</code></em> with the returned
presence.
</p>
<p>
If no accounts are enabled or valid the output will be
(<a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-OFFLINE:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_OFFLINE</code></a>, "offline", "").
</p>
<p>
Since 0.17.5, if the only connected accounts does not implement
<a class="link" href="telepathy-glib-interfaces.html#TP-IFACE-CONNECTION-INTERFACE-SIMPLE-PRESENCE:CAPS" title="TP_IFACE_CONNECTION_INTERFACE_SIMPLE_PRESENCE"><code class="literal">TP_IFACE_CONNECTION_INTERFACE_SIMPLE_PRESENCE</code></a>, the output will be
(<a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-AVAILABLE:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_AVAILABLE</code></a>, "available", "").
</p>
<p>
The return value of this function is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has finished; until then, the
value will be the same as if no accounts are enabled or valid.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>status</code></em> :</span></p></td>
<td>a string to fill with the actual status. <span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>message</code></em> :</span></p></td>
<td>a string to fill with the actual status
message. <span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the most available presence across all accounts</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-set-all-requested-presences"></a><h3>tp_account_manager_set_all_requested_presences ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_set_all_requested_presences
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a> type</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *status</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *message</code></em>);</pre>
<p>
Iterates through the accounts in <em class="parameter"><code>manager</code></em> and requests the presence
(<em class="parameter"><code>type</code></em>, <em class="parameter"><code>status</code></em> and <em class="parameter"><code>message</code></em>). Note that the presence requested here is
merely a request, and if might not be satisfiable.
</p>
<p>
You can find the most available presence across all accounts by calling
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-most-available-presence" title="tp_account_manager_get_most_available_presence ()"><code class="function">tp_account_manager_get_most_available_presence()</code></a>.
</p>
<p>
Setting a requested presence on all accounts will have no effect
until <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a>
(or the older <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-async" title="tp_account_manager_prepare_async ()"><code class="function">tp_account_manager_prepare_async()</code></a>) has finished.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em> :</span></p></td>
<td>a presence type to request</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>status</code></em> :</span></p></td>
<td>a status to request</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>message</code></em> :</span></p></td>
<td>a status message to request</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-enable-restart"></a><h3>tp_account_manager_enable_restart ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_enable_restart   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>
Enable autostarting the account manager D-Bus service. This means
that the account manager will be restarted if it disappears from
the bus.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS"></a><h3>TP_ACCOUNT_MANAGER_FEATURE_CORE</h3>
<pre class="programlisting">#define             TP_ACCOUNT_MANAGER_FEATURE_CORE</pre>
<p>
Expands to a call to a function that returns a quark for the "core" feature
on a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>.
</p>
<p>
When this feature is prepared, the list of accounts have been retrieved and
are available for use, and change-notification has been set up.
Additionally, the <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> objects for accounts which existed at the time
this feature was prepared will have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><span class="type">TP_ACCOUNT_FEATURE_CORE</span></a> prepared, but
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> objects subsequently announced by
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-validity-changed" title='The "account-validity-changed" signal'><span class="type">"account-validity-changed"</span></a> are <span class="emphasis"><em>not</em></span>
guaranteed to have this feature prepared. In practice, this means that
the accounts returned by calling <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a>
immediately after successfully calling <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-finish" title="tp_proxy_prepare_finish ()"><code class="function">tp_proxy_prepare_finish()</code></a> on the
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> will have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><span class="type">TP_ACCOUNT_FEATURE_CORE</span></a> prepared, but later
calls to that function do not have the same guarantee.
</p>
<p>
One can ask for a feature to be prepared using the
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> function, and waiting for it to callback.
</p>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-is-prepared"></a><h3>tp_account_manager_is_prepared ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>            tp_account_manager_is_prepared      (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GQuark</span> feature</code></em>);</pre>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>feature</code></em> :</span></p></td>
<td>a feature which is required</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the same thing as <a class="link" href="telepathy-glib-proxy.html#tp-proxy-is-prepared" title="tp_proxy_is_prepared ()"><code class="function">tp_proxy_is_prepared()</code></a>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-prepare-async"></a><h3>tp_account_manager_prepare_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                tp_account_manager_prepare_async    (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">GQuark</span> *features</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">tp_account_manager_prepare_async</code> is deprecated and should not be used in newly-written code. since 0.15.6, use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> instead.</p>
</div>
<p>
Requests an asynchronous preparation of <em class="parameter"><code>manager</code></em> with
<a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a>, plus any features specified
by <em class="parameter"><code>features</code></em>. When the operation is finished, <em class="parameter"><code>callback</code></em> will be called. You
can then call <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-finish" title="tp_account_manager_prepare_finish ()"><code class="function">tp_account_manager_prepare_finish()</code></a> to get the result of the
operation.
</p>
<p>
If <code class="literal">NULL</code> is given to <em class="parameter"><code>callback</code></em>, then no callback will be called when the
operation is finished. Instead, it will simply set <em class="parameter"><code>features</code></em> on <em class="parameter"><code>manager</code></em>.
Note that if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>, then <em class="parameter"><code>user_data</code></em> must also be <code class="literal">NULL</code>.
</p>
<p>
In version 0.11.3 or later, this is equivalent to calling
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> with the same arguments.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>features</code></em> :</span></p></td>
<td>a 0-terminated list of features, or <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td>a callback to call when the request is satisfied</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>data to pass to <em class="parameter"><code>callback</code></em>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-prepare-finish"></a><h3>tp_account_manager_prepare_finish ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>            tp_account_manager_prepare_finish   (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                                         <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">tp_account_manager_prepare_finish</code> is deprecated and should not be used in newly-written code. since 0.15.6, use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-finish" title="tp_proxy_prepare_finish ()"><code class="function">tp_proxy_prepare_finish()</code></a> instead.</p>
</div>
<p>
Finishes an async preparation of the account manager <em class="parameter"><code>manager</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>result</code></em> :</span></p></td>
<td>a <span class="type">GAsyncResult</span>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>a <span class="type">GError</span> to fill</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>
<code class="literal">TRUE</code> if the preparation was successful, otherwise <code class="literal">FALSE</code>
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-callback-for-create-account"></a><h3>tp_cli_account_manager_callback_for_create_account ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                (*tp_cli_account_manager_callback_for_create_account)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *out_Account</code></em>,
                                                         <em class="parameter"><code>const <span class="type">GError</span> *error</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>
Signature of the callback called when a CreateAccount method call
succeeds or fails.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>the proxy on which the call was made</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out_Account</code></em> :</span></p></td>
<td>Used to return an 'out' argument if <em class="parameter"><code>error</code></em> is <code class="literal">NULL</code>: The new &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>
<code class="literal">NULL</code> on success, or an error on failure</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user-supplied data</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>user-supplied object</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-call-create-account"></a><h3>tp_cli_account_manager_call_create_account ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="returnvalue">TpProxyPendingCall</span></a> * tp_cli_account_manager_call_create_account
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><span class="type">gint</span> timeout_ms</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Connection_Manager</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Protocol</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *in_Display_Name</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *in_Parameters</code></em>,
                                                         <em class="parameter"><code><span class="type">GHashTable</span> *in_Properties</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-callback-for-create-account" title="tp_cli_account_manager_callback_for_create_account ()"><span class="type">tp_cli_account_manager_callback_for_create_account</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>
Start a CreateAccount method call.
</p>
<p>
Request the creation of a new &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;. The         account manager SHOULD NOT allow invalid accounts to be created.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout_ms</code></em> :</span></p></td>
<td>the timeout in milliseconds, or -1 to use the
default</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Connection_Manager</code></em> :</span></p></td>
<td>Used to pass an 'in' argument: The name of the connection manager, e.g. &amp;quot;salut&amp;quot;.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Protocol</code></em> :</span></p></td>
<td>Used to pass an 'in' argument: The protocol, e.g. &amp;quot;local-xmpp&amp;quot;.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Display_Name</code></em> :</span></p></td>
<td>Used to pass an 'in' argument: The initial value of the new account's &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;DisplayName&lt;/tp:dbus-ref&gt;           property. The account manager SHOULD modify this to make it unique if           an Account already exists with the same display name, for instance by           appending a number or the 'account' parameter. Account manager           implementations SHOULD accept an empty string, but account editing           user interfaces should avoid passing an empty string for this           parameter.            &lt;tp:rationale&gt;             &lt;p&gt;The account creation UI may ask the user for a name for the new               account. If the author of the UI chooses not to do this, the               account creation UI is better able to suggest a default display               name because it has protocol-specific knowledge which the account               manager does not.&lt;/p&gt;              &lt;p&gt;The account manager always knows the complete list of accounts so               it can easily tell whether it should append something to the               display name to avoid presenting two identically-named accounts to               the user.&lt;/p&gt;           &lt;/tp:rationale&gt;</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Parameters</code></em> :</span></p></td>
<td>Used to pass an 'in' argument: Initial parameter values, as would be passed to           &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.ConnectionManager"&gt;RequestConnection&lt;/tp:dbus-ref&gt;.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Properties</code></em> :</span></p></td>
<td>Used to pass an 'in' argument: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;The values of any other properties to be set immediately on the             new Account.&lt;/p&gt;            &lt;p&gt;Only the properties mentioned in             &lt;tp:member-ref&gt;SupportedAccountProperties&lt;/tp:member-ref&gt; are             acceptable here. In particular, the &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;DisplayName&lt;/tp:dbus-ref&gt;             and &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;Parameters&lt;/tp:dbus-ref&gt;             properties are never allowed here, since they are set using the other             arguments to this method.&lt;/p&gt;            &lt;p&gt;Account manager implementations SHOULD support creating accounts             with an empty value for this argument.&lt;/p&gt;</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td>called when the method call succeeds or fails;
may be <code class="literal">NULL</code> to make a "fire and forget" call with no
reply tracking</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user-supplied data passed to the callback;
must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td>called with the user_data as argument, after the
call has succeeded, failed or been cancelled;
must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>If not <code class="literal">NULL</code>, a <span class="type">GObject</span> which will be
weakly referenced; if it is destroyed, this call
will automatically be cancelled. Must be <code class="literal">NULL</code> if
<em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> representing the call in
progress. It is borrowed from the object, and will become
invalid when the callback is called, the call is
cancelled or the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> becomes invalid.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-signal-callback-account-removed"></a><h3>tp_cli_account_manager_signal_callback_account_removed ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                (*tp_cli_account_manager_signal_callback_account_removed)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>
Represents the signature of a callback for the signal AccountRemoved.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>The proxy on which <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-removed" title="tp_cli_account_manager_connect_to_account_removed ()"><code class="function">tp_cli_account_manager_connect_to_account_removed()</code></a>
was called</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>arg_Account</code></em> :</span></p></td>
<td>An Account, which must not be used any more.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>User-supplied data</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>User-supplied weakly referenced object</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-connect-to-account-removed"></a><h3>tp_cli_account_manager_connect_to_account_removed ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> * tp_cli_account_manager_connect_to_account_removed
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-removed" title="tp_cli_account_manager_signal_callback_account_removed ()"><span class="type">tp_cli_account_manager_signal_callback_account_removed</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>
Connect a handler to the signal AccountRemoved.
</p>
<p>
The given account has been removed.          &lt;tp:rationale&gt;           This is effectively change notification for the valid and invalid           accounts lists. On emission of this signal, the Account indicated           will no longer be present in either of the lists.         &lt;/tp:rationale&gt;
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>A <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> or subclass</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td>Callback to be called when the signal is
received</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>User-supplied data for the callback</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td>Destructor for the user-supplied data, which
will be called when this signal is disconnected, or
before this function returns <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>A <span class="type">GObject</span> which will be weakly referenced;
if it is destroyed, this callback will automatically be
disconnected</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is
returned</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="type">TpProxySignalConnection</span></a> containing all of the
above, which can be used to disconnect the signal; or
<code class="literal">NULL</code> if the proxy does not have the desired interface
or has become invalid.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-signal-callback-account-validity-changed"></a><h3>tp_cli_account_manager_signal_callback_account_validity_changed ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                (*tp_cli_account_manager_signal_callback_account_validity_changed)
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> arg_Valid</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>
Represents the signature of a callback for the signal AccountValidityChanged.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>The proxy on which <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-validity-changed" title="tp_cli_account_manager_connect_to_account_validity_changed ()"><code class="function">tp_cli_account_manager_connect_to_account_validity_changed()</code></a>
was called</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>arg_Account</code></em> :</span></p></td>
<td>An &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>arg_Valid</code></em> :</span></p></td>
<td>True if the account is now valid.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>User-supplied data</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>User-supplied weakly referenced object</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-connect-to-account-validity-changed"></a><h3>tp_cli_account_manager_connect_to_account_validity_changed ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> * tp_cli_account_manager_connect_to_account_validity_changed
                                                        (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                                         <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-validity-changed" title="tp_cli_account_manager_signal_callback_account_validity_changed ()"><span class="type">tp_cli_account_manager_signal_callback_account_validity_changed</span></a> callback</code></em>,
                                                         <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                                         <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                                         <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>
Connect a handler to the signal AccountValidityChanged.
</p>
<p>
The validity of the given account has changed. New accounts are         also indicated by this signal, as an account validity change         (usually to True) on an account that did not previously exist.          &lt;tp:rationale&gt;           This is effectively change notification for the valid and invalid           accounts lists.         &lt;/tp:rationale&gt;
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td>A <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> or subclass</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td>Callback to be called when the signal is
received</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>User-supplied data for the callback</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td>Destructor for the user-supplied data, which
will be called when this signal is disconnected, or
before this function returns <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td>A <span class="type">GObject</span> which will be weakly referenced;
if it is destroyed, this callback will automatically be
disconnected</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is
returned</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="type">TpProxySignalConnection</span></a> containing all of the
above, which can be used to disconnect the signal; or
<code class="literal">NULL</code> if the proxy does not have the desired interface
or has become invalid.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="TpAccountManager-account-disabled"></a><h3>The <code class="literal">"account-disabled"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
                                                        <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
                                                        <span class="type">gpointer</span>          user_data)      : <code class="literal">Run Last</code></pre>
<p>
Emitted when an account from <em class="parameter"><code>manager</code></em> is disabled.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>account</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-enabled"></a><h3>The <code class="literal">"account-enabled"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
                                                        <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
                                                        <span class="type">gpointer</span>          user_data)      : <code class="literal">Run Last</code></pre>
<p>
Emitted when an account from <em class="parameter"><code>manager</code></em> is enabled.
</p>
<p>
<em class="parameter"><code>account</code></em> is guaranteed to have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along
with all features previously passed to
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>account</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-removed"></a><h3>The <code class="literal">"account-removed"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
                                                        <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
                                                        <span class="type">gpointer</span>          user_data)      : <code class="literal">Run Last</code></pre>
<p>
Emitted when an account is removed from <em class="parameter"><code>manager</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>account</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-validity-changed"></a><h3>The <code class="literal">"account-validity-changed"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
                                                        <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
                                                        <span class="type">gboolean</span>          valid,
                                                        <span class="type">gpointer</span>          user_data)      : <code class="literal">Run Last</code></pre>
<p>
Emitted when the validity on <em class="parameter"><code>account</code></em> changes.
</p>
<p>
This signal is also used to indicate a new account that did not
previously exist has been added (with <em class="parameter"><code>valid</code></em> set to <code class="literal">TRUE</code>).
</p>
<p>
<em class="parameter"><code>account</code></em> is guaranteed to have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along
with all features previously passed to
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>account</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>valid</code></em> :</span></p></td>
<td>
<code class="literal">TRUE</code> if the account is now valid</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-most-available-presence-changed"></a><h3>The <code class="literal">"most-available-presence-changed"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
                                                        <span class="type">guint</span>             presence,
                                                        <span class="type">gchar</span>            *status,
                                                        <span class="type">gchar</span>            *message,
                                                        <span class="type">gpointer</span>          user_data)      : <code class="literal">Run Last</code></pre>
<p>
Emitted when the most available presence on <em class="parameter"><code>manager</code></em> changes.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>manager</code></em> :</span></p></td>
<td>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>presence</code></em> :</span></p></td>
<td>new presence type</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>status</code></em> :</span></p></td>
<td>new status</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>message</code></em> :</span></p></td>
<td>new status message</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.9.0</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.see-also"></a><h2>See Also</h2>
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>