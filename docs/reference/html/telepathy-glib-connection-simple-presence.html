<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Connection SimplePresence interface</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="telepathy-glib Reference Manual">
<link rel="up" href="ch-client.html" title="Client-side proxies">
<link rel="prev" href="telepathy-glib-connection-requests.html" title="Connection Requests interface">
<link rel="next" href="telepathy-glib-connection-presence.html" title="Connection Presence interface">
<meta name="generator" content="GTK-Doc V1.11 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch-dbus.html" title="General D-Bus support">
<link rel="chapter" href="ch-protocol.html" title="The Telepathy protocol">
<link rel="chapter" href="ch-client.html" title="Client-side proxies">
<link rel="chapter" href="ch-service-dbus.html" title="Service-side D-Bus interfaces">
<link rel="chapter" href="ch-service-base.html" title="Service-side implementation">
<link rel="chapter" href="ch-service-handles.html" title="Service-side handle repositories">
<link rel="chapter" href="ch-utilities.html" title="Utilities">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="telepathy-glib-connection-requests.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch-client.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">telepathy-glib Reference Manual</th>
<td><a accesskey="n" href="telepathy-glib-connection-presence.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#telepathy-glib-connection-simple-presence.synopsis" class="shortcut">Top</a>
                 | 
                <a href="#telepathy-glib-connection-simple-presence.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry" title="Connection SimplePresence interface">
<a name="telepathy-glib-connection-simple-presence"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="telepathy-glib-connection-simple-presence.top_of_page"></a>Connection SimplePresence interface</span></h2>
<p>Connection SimplePresence interface — client-side wrappers for the SimplePresence interface</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv" title="Synopsis">
<a name="telepathy-glib-connection-simple-presence.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;telepathy-glib/connection.h&gt;

<a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-run-get-presences" title="tp_cli_connection_interface_simple_presence_run_get_presences ()">tp_cli_connection_interface_simple_presence_run_get_presences</a>
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Arrays.html#GArray"
>GArray</a> *in_Contacts,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> **out_Presence,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
>GMainLoop</a> **loop);
<a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-run-set-presence" title="tp_cli_connection_interface_simple_presence_run_set_presence ()">tp_cli_connection_interface_simple_presence_run_set_presence</a>
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status_Message,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
>GMainLoop</a> **loop);
<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall">TpProxyPendingCall</a> * <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-call-get-presences" title="tp_cli_connection_interface_simple_presence_call_get_presences ()">tp_cli_connection_interface_simple_presence_call_get_presences</a>
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Arrays.html#GArray"
>GArray</a> *in_Contacts,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-get-presences" title="tp_cli_connection_interface_simple_presence_callback_for_get_presences ()">tp_cli_connection_interface_simple_presence_callback_for_get_presences</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);
<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall">TpProxyPendingCall</a> * <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-call-set-presence" title="tp_cli_connection_interface_simple_presence_call_set_presence ()">tp_cli_connection_interface_simple_presence_call_set_presence</a>
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status_Message,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-set-presence" title="tp_cli_connection_interface_simple_presence_callback_for_set_presence ()">tp_cli_connection_interface_simple_presence_callback_for_set_presence</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);
void                (<a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-get-presences" title="tp_cli_connection_interface_simple_presence_callback_for_get_presences ()">*tp_cli_connection_interface_simple_presence_callback_for_get_presences</a>)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> *out_Presence,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> *error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);
void                (<a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-set-presence" title="tp_cli_connection_interface_simple_presence_callback_for_set_presence ()">*tp_cli_connection_interface_simple_presence_callback_for_set_presence</a>)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> *error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection">TpProxySignalConnection</a> * <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-connect-to-presences-changed" title="tp_cli_connection_interface_simple_presence_connect_to_presences_changed ()">tp_cli_connection_interface_simple_presence_connect_to_presences_changed</a>
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-signal-callback-presences-changed" title="tp_cli_connection_interface_simple_presence_signal_callback_presences_changed ()">tp_cli_connection_interface_simple_presence_signal_callback_presences_changed</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error);
void                (<a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-signal-callback-presences-changed" title="tp_cli_connection_interface_simple_presence_signal_callback_presences_changed ()">*tp_cli_connection_interface_simple_presence_signal_callback_presences_changed</a>)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> *arg_Presence,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);
</pre>
</div>
<div class="refsect1" title="Description">
<a name="telepathy-glib-connection-simple-presence.description"></a><h2>Description</h2>
<p>
Most instant messaging protocols allow users to advertise their presence
status. In Telepathy, this is represented by the SimplePresence
interface, which lets applications advertise the presence status of the
local user, and query the presence status of their contacts.
</p>
<p>
This section documents the auto-generated C wrappers for the
SimplePresence interface, used with <a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> objects.</p>
<p>
</p>
</div>
<div class="refsect1" title="Details">
<a name="telepathy-glib-connection-simple-presence.details"></a><h2>Details</h2>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_run_get_presences ()">
<a name="tp-cli-connection-interface-simple-presence-run-get-presences"></a><h3>tp_cli_connection_interface_simple_presence_run_get_presences ()</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            tp_cli_connection_interface_simple_presence_run_get_presences
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Arrays.html#GArray"
>GArray</a> *in_Contacts,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> **out_Presence,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
>GMainLoop</a> **loop);</pre>
<p>
Call the method GetPresences and run the main loop
until it returns. Before calling this method, you must
add a reference to any borrowed objects you need to keep,
and generally ensure that everything is in a consistent
state.
</p>
<p>
Get presence previously emitted by         &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt; for the given         contacts. Data is returned in the same structure as the         PresencesChanged signal; no additional network requests are made.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> A <a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> or subclass
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout_ms</code></em> :</span></p></td>
<td> Timeout in milliseconds, or -1 for default
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Contacts</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: An array of the contacts whose presence should be obtained.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out_Presence</code></em> :</span></p></td>
<td> Used to return an 'out' argument if <code class="literal">TRUE</code> is returned: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;Presence information in the same format as for the             &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt; signal.             The returned mapping MUST include an entry for each contact             in the method's argument.&lt;/p&gt;            &lt;p&gt;The definition of the connection presence types Unknown             and Offline means that if a connection manager will return             Unknown for contacts not on the subscribe list, it MUST delay             the reply to this method call until it has found out which             contacts are, in fact, on the subscribe list.&lt;/p&gt;
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, used to return errors if <code class="literal">FALSE</code> 
 is returned
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>loop</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, set before re-entering 
 the main loop, to point to a <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
><span class="type">GMainLoop</span></a> 
 which can be used to cancel this call with 
 <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-main-loop-quit"
><code class="function">g_main_loop_quit()</code></a>, causing a return of 
 <code class="literal">FALSE</code> with <em class="parameter"><code>error</code></em> set to <a class="link" href="telepathy-glib-proxy.html#TP-DBUS-ERROR-CANCELLED--CAPS"><code class="literal">TP_DBUS_ERROR_CANCELLED</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE on success, FALSE and sets <em class="parameter"><code>error</code></em> on error
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_run_set_presence ()">
<a name="tp-cli-connection-interface-simple-presence-run-set-presence"></a><h3>tp_cli_connection_interface_simple_presence_run_set_presence ()</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            tp_cli_connection_interface_simple_presence_run_set_presence
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status_Message,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
>GMainLoop</a> **loop);</pre>
<p>
Call the method SetPresence and run the main loop
until it returns. Before calling this method, you must
add a reference to any borrowed objects you need to keep,
and generally ensure that everything is in a consistent
state.
</p>
<p>
&lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;         &lt;p&gt;Request that the presence status and status message are published for           the connection.  Changes will be indicated by           &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt;           signals being emitted.&lt;/p&gt;          &lt;p&gt;This method may be called on a newly-created connection while it           is still in the DISCONNECTED state, to request that when the           connection connects, it will do so with the selected status.&lt;/p&gt;          &lt;p&gt;In DISCONNECTED state the           &lt;tp:member-ref&gt;Statuses&lt;/tp:member-ref&gt;           property will indicate which statuses are allowed to be set           while DISCONNECTED (none, if the Connection Manager doesn't allow           this). This value MUST NOT be cached, as the set of allowed           presences might change upon connecting.&lt;/p&gt;</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> A <a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> or subclass
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout_ms</code></em> :</span></p></td>
<td> Timeout in milliseconds, or -1 for default
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Status</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;The string identifier of the desired status. Possible status             identifiers are defined in the             &lt;tp:member-ref&gt;Statuses&lt;/tp:member-ref&gt; property.&lt;/p&gt;            &lt;p&gt;Clients MUST NOT set a status whose string value they do not             recognise, even if its presence type in Statuses             matches what the user requested.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;Suppose a protocol has statuses that include 'phone' (of type               BUSY) and 'in-a-meeting' (of type BUSY), but there is no               generic 'busy' status.&lt;/p&gt;              &lt;p&gt;If the user requests &amp;quot;Busy&amp;quot; status from a menu, a               client author might be tempted to pick an arbitrary status               that has type BUSY. However, on this protocol, neither of               the choices would be appropriate, and incorrect information               about the user would be conveyed.&lt;/p&gt;           &lt;/tp:rationale&gt;            &lt;p&gt;Statuses whose &lt;tp:type&gt;Connection_Presence_Type&lt;/tp:type&gt;             is Offline, Error or Unknown MUST NOT be passed to this             function. Connection managers SHOULD reject these statuses.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;To go offline, call &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Connection"&gt;Disconnect&lt;/tp:dbus-ref&gt;             instead. The &amp;quot;error&amp;quot; and &amp;quot;unknown&amp;quot; statuses make no sense.&lt;/p&gt;           &lt;/tp:rationale&gt;
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Status_Message</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: The status message associated with the current status.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, used to return errors if <code class="literal">FALSE</code> 
 is returned
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>loop</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, set before re-entering 
 the main loop, to point to a <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#GMainLoop"
><span class="type">GMainLoop</span></a> 
 which can be used to cancel this call with 
 <a
href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-main-loop-quit"
><code class="function">g_main_loop_quit()</code></a>, causing a return of 
 <code class="literal">FALSE</code> with <em class="parameter"><code>error</code></em> set to <a class="link" href="telepathy-glib-proxy.html#TP-DBUS-ERROR-CANCELLED--CAPS"><code class="literal">TP_DBUS_ERROR_CANCELLED</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE on success, FALSE and sets <em class="parameter"><code>error</code></em> on error
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_call_get_presences ()">
<a name="tp-cli-connection-interface-simple-presence-call-get-presences"></a><h3>tp_cli_connection_interface_simple_presence_call_get_presences ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall">TpProxyPendingCall</a> * tp_cli_connection_interface_simple_presence_call_get_presences
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Arrays.html#GArray"
>GArray</a> *in_Contacts,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-get-presences" title="tp_cli_connection_interface_simple_presence_callback_for_get_presences ()">tp_cli_connection_interface_simple_presence_callback_for_get_presences</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);</pre>
<p>
Start a GetPresences method call.
</p>
<p>
Get presence previously emitted by         &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt; for the given         contacts. Data is returned in the same structure as the         PresencesChanged signal; no additional network requests are made.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout_ms</code></em> :</span></p></td>
<td> the timeout in milliseconds, or -1 to use the
  default
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Contacts</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: An array of the contacts whose presence should be obtained.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td> called when the method call succeeds or fails;
  may be <code class="literal">NULL</code> to make a "fire and forget" call with no 
  reply tracking
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user-supplied data passed to the callback;
  must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, a <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
><span class="type">GObject</span></a> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <code class="literal">NULL</code> if 
  <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> becomes invalid.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_call_set_presence ()">
<a name="tp-cli-connection-interface-simple-presence-call-set-presence"></a><h3>tp_cli_connection_interface_simple_presence_call_set_presence ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall">TpProxyPendingCall</a> * tp_cli_connection_interface_simple_presence_call_set_presence
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> timeout_ms,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *in_Status_Message,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-callback-for-set-presence" title="tp_cli_connection_interface_simple_presence_callback_for_set_presence ()">tp_cli_connection_interface_simple_presence_callback_for_set_presence</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);</pre>
<p>
Start a SetPresence method call.
</p>
<p>
&lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;         &lt;p&gt;Request that the presence status and status message are published for           the connection.  Changes will be indicated by           &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt;           signals being emitted.&lt;/p&gt;          &lt;p&gt;This method may be called on a newly-created connection while it           is still in the DISCONNECTED state, to request that when the           connection connects, it will do so with the selected status.&lt;/p&gt;          &lt;p&gt;In DISCONNECTED state the           &lt;tp:member-ref&gt;Statuses&lt;/tp:member-ref&gt;           property will indicate which statuses are allowed to be set           while DISCONNECTED (none, if the Connection Manager doesn't allow           this). This value MUST NOT be cached, as the set of allowed           presences might change upon connecting.&lt;/p&gt;</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout_ms</code></em> :</span></p></td>
<td> the timeout in milliseconds, or -1 to use the
  default
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Status</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;The string identifier of the desired status. Possible status             identifiers are defined in the             &lt;tp:member-ref&gt;Statuses&lt;/tp:member-ref&gt; property.&lt;/p&gt;            &lt;p&gt;Clients MUST NOT set a status whose string value they do not             recognise, even if its presence type in Statuses             matches what the user requested.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;Suppose a protocol has statuses that include 'phone' (of type               BUSY) and 'in-a-meeting' (of type BUSY), but there is no               generic 'busy' status.&lt;/p&gt;              &lt;p&gt;If the user requests &amp;quot;Busy&amp;quot; status from a menu, a               client author might be tempted to pick an arbitrary status               that has type BUSY. However, on this protocol, neither of               the choices would be appropriate, and incorrect information               about the user would be conveyed.&lt;/p&gt;           &lt;/tp:rationale&gt;            &lt;p&gt;Statuses whose &lt;tp:type&gt;Connection_Presence_Type&lt;/tp:type&gt;             is Offline, Error or Unknown MUST NOT be passed to this             function. Connection managers SHOULD reject these statuses.&lt;/p&gt;            &lt;tp:rationale&gt;             &lt;p&gt;To go offline, call &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Connection"&gt;Disconnect&lt;/tp:dbus-ref&gt;             instead. The &amp;quot;error&amp;quot; and &amp;quot;unknown&amp;quot; statuses make no sense.&lt;/p&gt;           &lt;/tp:rationale&gt;
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in_Status_Message</code></em> :</span></p></td>
<td> Used to pass an 'in' argument: The status message associated with the current status.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td> called when the method call succeeds or fails;
  may be <code class="literal">NULL</code> to make a "fire and forget" call with no 
  reply tracking
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user-supplied data passed to the callback;
  must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td> called with the user_data as argument, after the
  call has succeeded, failed or been cancelled;
  must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, a <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
><span class="type">GObject</span></a> which will be 
  weakly referenced; if it is destroyed, this call 
  will automatically be cancelled. Must be <code class="literal">NULL</code> if 
  <em class="parameter"><code>callback</code></em> is <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> representing the call in
 progress. It is borrowed from the object, and will become
 invalid when the callback is called, the call is
 cancelled or the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> becomes invalid.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_callback_for_get_presences ()">
<a name="tp-cli-connection-interface-simple-presence-callback-for-get-presences"></a><h3>tp_cli_connection_interface_simple_presence_callback_for_get_presences ()</h3>
<pre class="programlisting">void                (*tp_cli_connection_interface_simple_presence_callback_for_get_presences)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> *out_Presence,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> *error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);</pre>
<p>
Signature of the callback called when a GetPresences method call
succeeds or fails.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> the proxy on which the call was made
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out_Presence</code></em> :</span></p></td>
<td> Used to return an 'out' argument if <em class="parameter"><code>error</code></em> is <code class="literal">NULL</code>: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;Presence information in the same format as for the             &lt;tp:member-ref&gt;PresencesChanged&lt;/tp:member-ref&gt; signal.             The returned mapping MUST include an entry for each contact             in the method's argument.&lt;/p&gt;            &lt;p&gt;The definition of the connection presence types Unknown             and Offline means that if a connection manager will return             Unknown for contacts not on the subscribe list, it MUST delay             the reply to this method call until it has found out which             contacts are, in fact, on the subscribe list.&lt;/p&gt;
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> <code class="literal">NULL</code> on success, or an error on failure
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user-supplied data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> user-supplied object
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_callback_for_set_presence ()">
<a name="tp-cli-connection-interface-simple-presence-callback-for-set-presence"></a><h3>tp_cli_connection_interface_simple_presence_callback_for_set_presence ()</h3>
<pre class="programlisting">void                (*tp_cli_connection_interface_simple_presence_callback_for_set_presence)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> *error,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);</pre>
<p>
Signature of the callback called when a SetPresence method call
succeeds or fails.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> the proxy on which the call was made
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> <code class="literal">NULL</code> on success, or an error on failure
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user-supplied data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> user-supplied object
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_connect_to_presences_changed ()">
<a name="tp-cli-connection-interface-simple-presence-connect-to-presences-changed"></a><h3>tp_cli_connection_interface_simple_presence_connect_to_presences_changed ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection">TpProxySignalConnection</a> * tp_cli_connection_interface_simple_presence_connect_to_presences_changed
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-signal-callback-presences-changed" title="tp_cli_connection_interface_simple_presence_signal_callback_presences_changed ()">tp_cli_connection_interface_simple_presence_signal_callback_presences_changed</a> callback,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> destroy,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"
>GError</a> **error);</pre>
<p>
Connect a handler to the signal PresencesChanged.
</p>
<p>
This signal should be emitted when your own presence has been changed,         or the presence of the member of any of the connection's channels has         been changed.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> A <a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> or subclass
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>callback</code></em> :</span></p></td>
<td> Callback to be called when the signal is
  received
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> User-supplied data for the callback
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>destroy</code></em> :</span></p></td>
<td> Destructor for the user-supplied data, which
  will be called when this signal is disconnected, or
  before this function returns <code class="literal">NULL</code>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> A <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
><span class="type">GObject</span></a> which will be weakly referenced; 
  if it is destroyed, this callback will automatically be
  disconnected
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is
  returned
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a <a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="type">TpProxySignalConnection</span></a> containing all of the
above, which can be used to disconnect the signal; or
<code class="literal">NULL</code> if the proxy does not have the desired interface
or has become invalid.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="tp_cli_connection_interface_simple_presence_signal_callback_presences_changed ()">
<a name="tp-cli-connection-interface-simple-presence-signal-callback-presences-changed"></a><h3>tp_cli_connection_interface_simple_presence_signal_callback_presences_changed ()</h3>
<pre class="programlisting">void                (*tp_cli_connection_interface_simple_presence_signal_callback_presences_changed)
                                                        (<a class="link" href="telepathy-glib-connection.html#TpConnection">TpConnection</a> *proxy,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Hash-Tables.html#GHashTable"
>GHashTable</a> *arg_Presence,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data,
                                                         <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a> *weak_object);</pre>
<p>
Represents the signature of a callback for the signal PresencesChanged.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>proxy</code></em> :</span></p></td>
<td> The proxy on which <a class="link" href="telepathy-glib-connection-simple-presence.html#tp-cli-connection-interface-simple-presence-connect-to-presences-changed" title="tp_cli_connection_interface_simple_presence_connect_to_presences_changed ()"><code class="function">tp_cli_connection_interface_simple_presence_connect_to_presences_changed()</code></a>
 was called
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>arg_Presence</code></em> :</span></p></td>
<td> A dictionary of contact handles mapped to the status,           presence type and status message.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> User-supplied data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>weak_object</code></em> :</span></p></td>
<td> User-supplied weakly referenced object
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" title="See Also">
<a name="telepathy-glib-connection-simple-presence.see-also"></a><h2>See Also</h2>
#TpConnection
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.11</div>
</body>
</html>
