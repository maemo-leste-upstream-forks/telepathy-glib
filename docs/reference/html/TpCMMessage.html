<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>telepathy-glib API Reference Manual: TpCMMessage</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="telepathy-glib API Reference Manual">
<link rel="up" href="ch-service-base.html" title="Service-side implementation">
<link rel="prev" href="TpMessage.html" title="TpMessage">
<link rel="next" href="telepathy-glib-base-password-channel.html" title="TpBasePasswordChannel">
<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
                  <a href="#TpCMMessage.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
                  <a href="#TpCMMessage.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch-service-base.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="TpMessage.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="telepathy-glib-base-password-channel.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="TpCMMessage"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="TpCMMessage.top_of_page"></a>TpCMMessage</span></h2>
<p>TpCMMessage — a message in the Telepathy message interface, CM side</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="TpCMMessage.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="TpMessage.html" title="TpMessage"><span class="returnvalue">TpMessage</span></a> *
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-new" title="tp_cm_message_new ()">tp_cm_message_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="TpMessage.html" title="TpMessage"><span class="returnvalue">TpMessage</span></a> *
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-new-text" title="tp_cm_message_new_text ()">tp_cm_message_new_text</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-set-message" title="tp_cm_message_set_message ()">tp_cm_message_set_message</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-take-message" title="tp_cm_message_take_message ()">tp_cm_message_take_message</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="returnvalue">TpHandle</span></a>
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-get-sender" title="tp_cm_message_get_sender ()">tp_cm_message_get_sender</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="TpCMMessage.html#tp-cm-message-set-sender" title="tp_cm_message_set_sender ()">tp_cm_message_set_sender</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="TpCMMessage.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody><tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a class="link" href="TpCMMessage.html#TpCMMessage-struct" title="TpCMMessage">TpCMMessage</a></td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1">
<a name="TpCMMessage.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    <a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject">GObject</a>
    <span class="lineart">╰──</span> <a class="link" href="TpMessage.html" title="TpMessage">TpMessage</a>
        <span class="lineart">╰──</span> TpCMMessage
</pre>
</div>
<div class="refsect1">
<a name="TpCMMessage.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;telepathy-glib/telepathy-glib.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="TpCMMessage.description"></a><h2>Description</h2>
<p><a class="link" href="TpCMMessage.html" title="TpCMMessage"><span class="type">TpCMMessage</span></a> is used within connection managers to represent a
 message sent or received using the Messages interface.</p>
</div>
<div class="refsect1">
<a name="TpCMMessage.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="tp-cm-message-new"></a><h3>tp_cm_message_new ()</h3>
<pre class="programlisting"><a class="link" href="TpMessage.html" title="TpMessage"><span class="returnvalue">TpMessage</span></a> *
tp_cm_message_new (<em class="parameter"><code><a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a> *connection</code></em>,
                   <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> initial_parts</code></em>);</pre>
<p></p>
<div class="refsect3">
<a name="id-1.6.18.8.2.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>connection</p></td>
<td class="parameter_description"><p>a connection on which to reference handles</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>initial_parts</p></td>
<td class="parameter_description"><p>number of parts to create (at least 1)</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.18.8.2.6"></a><h4>Returns</h4>
<p> a newly allocated message suitable to be passed to
<code class="function">tp_cm_message_mixin_take_received()</code></p>
<p></p>
</div>
<p class="since">Since 0.13.9</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cm-message-new-text"></a><h3>tp_cm_message_new_text ()</h3>
<pre class="programlisting"><a class="link" href="TpMessage.html" title="TpMessage"><span class="returnvalue">TpMessage</span></a> *
tp_cm_message_new_text (<em class="parameter"><code><a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a> *conn</code></em>,
                        <em class="parameter"><code><a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> sender</code></em>,
                        <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpChannelTextMessageType" title="enum TpChannelTextMessageType"><span class="type">TpChannelTextMessageType</span></a> type</code></em>,
                        <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *text</code></em>);</pre>
<p>A convenient function to create a new <a class="link" href="TpCMMessage.html" title="TpCMMessage"><span class="type">TpCMMessage</span></a> having
'text/plain' as 'content-type', <em class="parameter"><code>type</code></em>
 as 'message-type',
<em class="parameter"><code>text</code></em>
 as 'content' and <em class="parameter"><code>sender</code></em>
 as its sender.</p>
<div class="refsect3">
<a name="id-1.6.18.8.3.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>conn</p></td>
<td class="parameter_description"><p>a connection</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>sender</p></td>
<td class="parameter_description"><p>the <a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> of the sender of the message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>the type of message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>text</p></td>
<td class="parameter_description"><p>content of the messsage</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.18.8.3.6"></a><h4>Returns</h4>
<p> a newly allocated <a class="link" href="TpCMMessage.html" title="TpCMMessage"><span class="type">TpCMMessage</span></a>. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since 0.13.10</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cm-message-set-message"></a><h3>tp_cm_message_set_message ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_cm_message_set_message (<em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *self</code></em>,
                           <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> part</code></em>,
                           <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *key</code></em>,
                           <em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *message</code></em>);</pre>
<p>Set <em class="parameter"><code>key</code></em>
 in part <em class="parameter"><code>part</code></em>
 of <em class="parameter"><code>self</code></em>
 to have <em class="parameter"><code>message</code></em>
 as an aa{sv} value (that
is, an array of Message_Part).</p>
<div class="refsect3">
<a name="id-1.6.18.8.4.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>part</p></td>
<td class="parameter_description"><p>a part number, which must be strictly less than the number
returned by <a class="link" href="TpMessage.html#tp-message-count-parts" title="tp_message_count_parts ()"><code class="function">tp_message_count_parts()</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>a key in the mapping representing the part</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>another (distinct) message created for the same <a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cm-message-take-message"></a><h3>tp_cm_message_take_message ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_cm_message_take_message (<em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *self</code></em>,
                            <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> part</code></em>,
                            <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *key</code></em>,
                            <em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *message</code></em>);</pre>
<p>Set <em class="parameter"><code>key</code></em>
 in part <em class="parameter"><code>part</code></em>
 of <em class="parameter"><code>self</code></em>
 to have <em class="parameter"><code>message</code></em>
 as an aa{sv} value (that
is, an array of Message_Part), and take ownership of <em class="parameter"><code>message</code></em>
.  The caller
should not use <em class="parameter"><code>message</code></em>
 after passing it to this function.  All handle
references owned by <em class="parameter"><code>message</code></em>
 will subsequently belong to and be released
with <em class="parameter"><code>self</code></em>
.</p>
<div class="refsect3">
<a name="id-1.6.18.8.5.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>part</p></td>
<td class="parameter_description"><p>a part number, which must be strictly less than the number
returned by <a class="link" href="TpMessage.html#tp-message-count-parts" title="tp_message_count_parts ()"><code class="function">tp_message_count_parts()</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>a key in the mapping representing the part</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>another (distinct) message created for the same <a class="link" href="TpBaseConnection.html" title="TpBaseConnection"><span class="type">TpBaseConnection</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.13.9</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cm-message-get-sender"></a><h3>tp_cm_message_get_sender ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="returnvalue">TpHandle</span></a>
tp_cm_message_get_sender (<em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *self</code></em>);</pre>
<p>Return the sender of <em class="parameter"><code>self</code></em>
, i.e. the "message-sender" key of the header,
or 0 if there is no sender.</p>
<div class="refsect3">
<a name="id-1.6.18.8.6.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="TpCMMessage.html" title="TpCMMessage"><span class="type">TpCMMessage</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.6.18.8.6.6"></a><h4>Returns</h4>
<p> a <a class="link" href="telepathy-glib-enums.html#TP-HANDLE-TYPE-CONTACT:CAPS"><code class="literal">TP_HANDLE_TYPE_CONTACT</code></a> handle, or 0</p>
<p></p>
</div>
<p class="since">Since 0.13.9</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cm-message-set-sender"></a><h3>tp_cm_message_set_sender ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_cm_message_set_sender (<em class="parameter"><code><a class="link" href="TpMessage.html" title="TpMessage"><span class="type">TpMessage</span></a> *self</code></em>,
                          <em class="parameter"><code><a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> handle</code></em>);</pre>
<p>Set the sender of <em class="parameter"><code>self</code></em>
, i.e. the "message-sender" and
"message-sender-id" keys in the header.</p>
<div class="refsect3">
<a name="id-1.6.18.8.7.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="TpCMMessage.html" title="TpCMMessage"><span class="type">TpCMMessage</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>handle</p></td>
<td class="parameter_description"><p>the <a class="link" href="telepathy-glib-handle.html#TpHandle" title="TpHandle"><span class="type">TpHandle</span></a> of the sender of the message</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.13.9</p>
</div>
</div>
<div class="refsect1">
<a name="TpCMMessage.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="TpCMMessage-struct"></a><h3>TpCMMessage</h3>
<pre class="programlisting">typedef struct _TpCMMessage TpCMMessage;</pre>
<p>Opaque structure representing a message in the Telepathy messages interface
(an array of at least one mapping from string to variant, where the first
mapping contains message headers and subsequent mappings contain the
message body).</p>
<p class="since">Since 0.13.9</p>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.20</div>
</body>
</html>